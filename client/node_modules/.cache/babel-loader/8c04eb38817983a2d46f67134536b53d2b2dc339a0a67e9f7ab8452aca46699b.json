{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\kaybe\\\\Downloads\\\\Sneakeralot-ecommerce-website-main\\\\client\\\\src\\\\components\\\\layout\\\\Hero\\\\Hero.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useRef, lazy, Suspense, useMemo, useTransition, startTransition } from 'react';\nimport { Link } from 'react-router-dom';\nimport styles from './Hero.module.css';\nimport ErrorBoundary from './ErrorBoundary';\n\n// Constants for better performance\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ZOOM_LEVELS = {\n  MIN: 1,\n  MAX: 3,\n  STEP: 0.5\n};\nconst ANIMATION_SPRING = {\n  tension: 170,\n  friction: 26\n};\nconst RETRY_DELAYS = [2000, 4000, 8000];\nconst INTERSECTION_OPTIONS = {\n  root: null,\n  rootMargin: '50px',\n  threshold: 0.1\n};\n\n// Lazy load components\nconst QuickView = /*#__PURE__*/lazy(_c = () => import('./QuickView'));\n_c2 = QuickView;\nconst Hero = () => {\n  _s();\n  const [currentSlide, setCurrentSlide] = useState(0);\n  const [isAutoPlaying, setIsAutoPlaying] = useState(true);\n  const [direction, setDirection] = useState('next');\n  const [touchStart, setTouchStart] = useState(null);\n  const [touchEnd, setTouchEnd] = useState(null);\n  const [isZoomed, setIsZoomed] = useState(false);\n  const [progress, setProgress] = useState(0);\n  const [zoomLevel, setZoomLevel] = useState(1);\n  const [panPosition, setPanPosition] = useState({\n    x: 0,\n    y: 0\n  });\n  const [isDragging, setIsDragging] = useState(false);\n  const [dragStart, setDragStart] = useState({\n    x: 0,\n    y: 0\n  });\n  const [activeHotspot, setActiveHotspot] = useState(null);\n  const [touchMoveCount, setTouchMoveCount] = useState(0);\n  const [pinchStart, setPinchStart] = useState(null);\n  const touchTimeout = useRef(null);\n  const sliderRef = useRef(null);\n  const progressInterval = useRef(null);\n  const imageRef = useRef(null);\n  const [activeQuickView, setActiveQuickView] = useState(null);\n  const [selectedSize, setSelectedSize] = useState(null);\n  const [selectedColor, setSelectedColor] = useState(null);\n  const [is360View, setIs360View] = useState(false);\n  const [rotationDegree, setRotationDegree] = useState(0);\n  const rotationRef = useRef(null);\n  const [announceMessage, setAnnounceMessage] = useState('');\n  const [focusedElement, setFocusedElement] = useState(null);\n  const announceRef = useRef(null);\n  const slideRefs = useRef([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [swipeVelocity, setSwipeVelocity] = useState(0);\n  const [lastTouchTime, setLastTouchTime] = useState(0);\n  const [lastTouchX, setLastTouchX] = useState(0);\n  const [preloadedImages, setPreloadedImages] = useState(new Set());\n  const parallaxRef = useRef(null);\n  const particlesRef = useRef(null);\n  const [imageLoadErrors, setImageLoadErrors] = useState(new Set());\n  const [retryCount, setRetryCount] = useState({});\n  const springRef = useRef(null);\n  const [touchDistance, setTouchDistance] = useState(0);\n  const [lastTapTime, setLastTapTime] = useState(0);\n  const [error, setError] = useState(null);\n\n  // Performance optimizations\n  const [isInView, setIsInView] = useState(false);\n  const [networkStatus, setNetworkStatus] = useState(navigator.onLine);\n  const [recycledSlides, setRecycledSlides] = useState(new Set());\n  const intersectionObserver = useRef(null);\n  const animationFrameId = useRef(null);\n  const transformCache = useRef(new Map());\n\n  // Add useTransition for smoother state updates\n  const [isPending, startTransition] = useTransition();\n\n  // Add ResizeObserver ref\n  const resizeObserver = useRef(null);\n\n  // Add momentum scrolling state\n  const [momentum, setMomentum] = useState({\n    velocity: 0,\n    timestamp: 0\n  });\n\n  // Add magnetic snap points\n  const snapPoints = useRef(new Map());\n  const slides = [{\n    id: 1,\n    title: \"Summer Collection 2024\",\n    subtitle: \"Step into Style\",\n    description: \"Discover the latest trends in sneaker fashion with our curated summer collection\",\n    cta: \"Shop Now\",\n    image: \"/images/hero/slide1.jpg\",\n    color: \"#FF4D4D\",\n    product: {\n      name: \"Air Max Pulse\",\n      price: 179.99,\n      originalPrice: 199.99,\n      sizes: [\"US 7\", \"US 8\", \"US 9\", \"US 10\", \"US 11\"],\n      colors: [{\n        name: \"Obsidian\",\n        code: \"#1a237e\"\n      }, {\n        name: \"Crimson\",\n        code: \"#d32f2f\"\n      }, {\n        name: \"Platinum\",\n        code: \"#e0e0e0\"\n      }],\n      images360: [\"/images/hero/slide1.jpg\", \"/images/hero/slide1.jpg\", \"/images/hero/slide1.jpg\"],\n      features: [\"Responsive Cushioning\", \"Breathable Mesh\", \"Durable Outsole\"]\n    },\n    hotspots: [{\n      id: 'hs1',\n      x: 25,\n      y: 45,\n      title: 'Premium Materials',\n      description: 'Made with genuine leather and premium textiles',\n      icon: 'diamond-outline',\n      type: 'material'\n    }, {\n      id: 'hs2',\n      x: 65,\n      y: 70,\n      title: 'Comfort Technology',\n      description: 'Advanced cushioning system for all-day comfort',\n      icon: 'fitness-outline',\n      type: 'feature',\n      price: 179.99\n    }]\n  }, {\n    id: 2,\n    title: \"Limited Edition Drops\",\n    subtitle: \"Exclusive Collection\",\n    description: \"Get your hands on rare and exclusive sneakers before they're gone\",\n    cta: \"View Collection\",\n    image: \"/images/hero/slide2.jpg\",\n    color: \"#4D7FFF\",\n    product: {\n      name: \"Limited Edition Runner\",\n      price: 199.99,\n      sizes: [\"US 8\", \"US 9\", \"US 10\"],\n      colors: [{\n        name: \"Gold\",\n        code: \"#FFD700\"\n      }, {\n        name: \"Silver\",\n        code: \"#C0C0C0\"\n      }],\n      images360: [\"/images/hero/slide2.jpg\", \"/images/hero/slide2.jpg\", \"/images/hero/slide2.jpg\"],\n      features: [\"Limited Edition\", \"Numbered Series\", \"Certificate of Authenticity\"]\n    },\n    hotspots: [{\n      id: 'hs3',\n      x: 35,\n      y: 60,\n      title: 'Limited Edition',\n      description: 'Only 100 pairs available worldwide',\n      icon: 'star-outline',\n      type: 'feature'\n    }]\n  }, {\n    id: 3,\n    title: \"New Arrivals\",\n    subtitle: \"Fresh Kicks\",\n    description: \"Be the first to wear the newest releases from top brands\",\n    cta: \"Explore Now\",\n    image: \"/images/hero/slide3.jpg\",\n    color: \"#FFB84D\",\n    product: {\n      name: \"Fresh Release\",\n      price: 159.99,\n      sizes: [\"US 7\", \"US 8\", \"US 9\", \"US 10\", \"US 11\"],\n      colors: [{\n        name: \"White\",\n        code: \"#FFFFFF\"\n      }, {\n        name: \"Black\",\n        code: \"#000000\"\n      }],\n      images360: [\"/images/hero/slide3.jpg\", \"/images/hero/slide3.jpg\", \"/images/hero/slide3.jpg\"],\n      features: [\"New Release\", \"Modern Design\", \"Premium Quality\"]\n    }\n  }];\n\n  // Memoized computations\n  const slideStyles = useMemo(() => {\n    return slides.map((slide, index) => ({\n      transform: transformCache.current.get(index) || 'none',\n      opacity: index === currentSlide ? 1 : 0\n    }));\n  }, [currentSlide, slides.length]);\n  const announceSlideChange = useCallback(index => {\n    const slide = slides[index];\n    const message = `Now showing slide ${index + 1} of ${slides.length}: ${slide.title}. ${slide.description}`;\n    setAnnounceMessage(message);\n  }, [slides]);\n  const nextSlide = useCallback(() => {\n    setDirection('next');\n    setCurrentSlide(prev => {\n      const newIndex = (prev + 1) % slides.length;\n      announceSlideChange(newIndex);\n      return newIndex;\n    });\n    setIsZoomed(false);\n    setProgress(0);\n  }, [slides.length, announceSlideChange]);\n  const prevSlide = useCallback(() => {\n    setDirection('prev');\n    setCurrentSlide(prev => {\n      const newIndex = (prev - 1 + slides.length) % slides.length;\n      announceSlideChange(newIndex);\n      return newIndex;\n    });\n    setIsZoomed(false);\n    setProgress(0);\n  }, [slides.length, announceSlideChange]);\n  const goToSlide = index => {\n    setDirection(index > currentSlide ? 'next' : 'prev');\n    setCurrentSlide(index);\n    announceSlideChange(index);\n    setIsZoomed(false);\n    setProgress(0);\n  };\n  useEffect(() => {\n    let interval;\n    if (isAutoPlaying && !isZoomed) {\n      interval = setInterval(nextSlide, 5000);\n\n      // Progress bar update\n      if (progressInterval.current) {\n        clearInterval(progressInterval.current);\n      }\n      progressInterval.current = setInterval(() => {\n        setProgress(prev => {\n          if (prev >= 100) return 0;\n          return prev + 2;\n        });\n      }, 100);\n    }\n    return () => {\n      clearInterval(interval);\n      if (progressInterval.current) {\n        clearInterval(progressInterval.current);\n      }\n    };\n  }, [isAutoPlaying, nextSlide, isZoomed]);\n  const handleMouseEnter = () => setIsAutoPlaying(false);\n  const handleMouseLeave = () => {\n    if (!isZoomed) {\n      setIsAutoPlaying(true);\n    }\n  };\n  const handleKeyDown = e => {\n    switch (e.key) {\n      case 'ArrowLeft':\n        prevSlide();\n        break;\n      case 'ArrowRight':\n        nextSlide();\n        break;\n      case 'ArrowUp':\n        if (isZoomed) {\n          setPanPosition(prev => ({\n            ...prev,\n            y: Math.max(prev.y - 10, -100)\n          }));\n        }\n        break;\n      case 'ArrowDown':\n        if (isZoomed) {\n          setPanPosition(prev => ({\n            ...prev,\n            y: Math.min(prev.y + 10, 100)\n          }));\n        }\n        break;\n      case 'Escape':\n        if (isZoomed) {\n          setIsZoomed(false);\n          setPanPosition({\n            x: 0,\n            y: 0\n          });\n          setZoomLevel(1);\n        } else if (activeQuickView !== null) {\n          setActiveQuickView(null);\n        }\n        break;\n      case 'Tab':\n        // Handle focus trap in quick view modal\n        if (activeQuickView !== null) {\n          e.preventDefault();\n          handleTabKey(e.shiftKey);\n        }\n        break;\n      case ' ':\n      case 'Enter':\n        if (focusedElement === 'slider') {\n          setIsAutoPlaying(prev => !prev);\n          announceAutoplayState(!isAutoPlaying);\n        }\n        break;\n      default:\n        break;\n    }\n  };\n  const handleTabKey = shiftKey => {\n    const focusableElements = getFocusableElements();\n    const firstElement = focusableElements[0];\n    const lastElement = focusableElements[focusableElements.length - 1];\n    if (shiftKey && document.activeElement === firstElement) {\n      lastElement.focus();\n    } else if (!shiftKey && document.activeElement === lastElement) {\n      firstElement.focus();\n    }\n  };\n  const getFocusableElements = () => {\n    const modal = document.querySelector(`.${styles.quickView}`);\n    if (!modal) return [];\n    return Array.from(modal.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'));\n  };\n  const announceAutoplayState = isPlaying => {\n    setAnnounceMessage(isPlaying ? 'Slideshow autoplay started' : 'Slideshow autoplay paused');\n  };\n\n  // Focus management\n  useEffect(() => {\n    if (activeQuickView !== null) {\n      // Focus first focusable element in quick view\n      const focusableElements = getFocusableElements();\n      if (focusableElements.length > 0) {\n        focusableElements[0].focus();\n      }\n    } else {\n      var _sliderRef$current;\n      // Return focus to slider\n      (_sliderRef$current = sliderRef.current) === null || _sliderRef$current === void 0 ? void 0 : _sliderRef$current.focus();\n    }\n  }, [activeQuickView]);\n\n  // Screen reader announcements\n  useEffect(() => {\n    const timeoutId = setTimeout(() => {\n      setAnnounceMessage('');\n    }, 1000);\n    return () => clearTimeout(timeoutId);\n  }, [announceMessage]);\n  const handleZoomIn = () => {\n    setZoomLevel(prev => Math.min(prev + 0.5, 3));\n    setIsZoomed(true);\n    setIsAutoPlaying(false);\n  };\n  const handleZoomOut = () => {\n    setZoomLevel(prev => {\n      const newZoom = Math.max(prev - 0.5, 1);\n      if (newZoom === 1) {\n        setIsZoomed(false);\n        setPanPosition({\n          x: 0,\n          y: 0\n        });\n      }\n      return newZoom;\n    });\n  };\n  const handleMouseDown = e => {\n    if (isZoomed) {\n      setIsDragging(true);\n      setDragStart({\n        x: e.clientX - panPosition.x,\n        y: e.clientY - panPosition.y\n      });\n    }\n  };\n  const handleMouseMove = e => {\n    if (isDragging && isZoomed) {\n      var _imageRef$current, _imageRef$current2;\n      const maxPanX = ((_imageRef$current = imageRef.current) === null || _imageRef$current === void 0 ? void 0 : _imageRef$current.offsetWidth) * (zoomLevel - 1) / 2;\n      const maxPanY = ((_imageRef$current2 = imageRef.current) === null || _imageRef$current2 === void 0 ? void 0 : _imageRef$current2.offsetHeight) * (zoomLevel - 1) / 2;\n      const newX = e.clientX - dragStart.x;\n      const newY = e.clientY - dragStart.y;\n      setPanPosition({\n        x: Math.max(Math.min(newX, maxPanX), -maxPanX),\n        y: Math.max(Math.min(newY, maxPanY), -maxPanY)\n      });\n    }\n  };\n  const handleMouseUp = () => {\n    setIsDragging(false);\n  };\n  const handleWheel = e => {\n    if (e.ctrlKey) {\n      e.preventDefault();\n      const delta = -Math.sign(e.deltaY) * 0.1;\n      const newZoom = Math.max(1, Math.min(3, zoomLevel + delta));\n      setZoomLevel(newZoom);\n      if (newZoom > 1) {\n        setIsZoomed(true);\n        setIsAutoPlaying(false);\n      } else {\n        setIsZoomed(false);\n        setPanPosition({\n          x: 0,\n          y: 0\n        });\n      }\n    }\n  };\n  useEffect(() => {\n    const handleKeyZoom = e => {\n      if (e.ctrlKey && e.key === '+') {\n        e.preventDefault();\n        handleZoomIn();\n      } else if (e.ctrlKey && e.key === '-') {\n        e.preventDefault();\n        handleZoomOut();\n      }\n    };\n    window.addEventListener('keydown', handleKeyZoom);\n    return () => window.removeEventListener('keydown', handleKeyZoom);\n  }, []);\n  const handleTouchStart = e => {\n    setLastTouchTime(Date.now());\n    setLastTouchX(e.touches[0].clientX);\n    if (e.touches.length === 2) {\n      // Handle pinch zoom\n      const distance = Math.hypot(e.touches[0].clientX - e.touches[1].clientX, e.touches[0].clientY - e.touches[1].clientY);\n      setPinchStart({\n        distance,\n        zoom: zoomLevel\n      });\n    } else {\n      setTouchStart(e.touches[0].clientX);\n      setTouchMoveCount(0);\n      if (touchTimeout.current) {\n        clearTimeout(touchTimeout.current);\n      }\n    }\n  };\n  const handleTouchMove = e => {\n    const currentTime = Date.now();\n    const currentX = e.touches[0].clientX;\n    const timeDiff = currentTime - lastTouchTime;\n    const distance = currentX - lastTouchX;\n    if (timeDiff > 0) {\n      setSwipeVelocity(distance / timeDiff);\n    }\n    if (pinchStart && e.touches.length === 2) {\n      // Handle pinch zoom\n      e.preventDefault();\n      const distance = Math.hypot(e.touches[0].clientX - e.touches[1].clientX, e.touches[0].clientY - e.touches[1].clientY);\n      const scale = distance / pinchStart.distance;\n      const newZoom = Math.max(1, Math.min(3, pinchStart.zoom * scale));\n      setZoomLevel(newZoom);\n      if (newZoom > 1) {\n        setIsZoomed(true);\n        setIsAutoPlaying(false);\n      }\n    } else if (e.touches.length === 1) {\n      setTouchEnd(e.touches[0].clientX);\n      setTouchMoveCount(prev => prev + 1);\n    }\n  };\n  const handleTouchEnd = useCallback(e => {\n    const now = Date.now();\n    const velocity = swipeVelocity;\n    setMomentum({\n      velocity,\n      timestamp: now\n    });\n    handleSlideTransition(velocity > 0 ? 'next' : 'prev');\n  }, [swipeVelocity, handleSlideTransition]);\n  useEffect(() => {\n    const slider = sliderRef.current;\n    if (slider) {\n      slider.focus();\n    }\n  }, []);\n  const getSlideClassName = index => {\n    if (index === currentSlide) return styles.active;\n    if (direction === 'next' && index === (currentSlide + 1) % slides.length) return styles.next;\n    if (direction === 'prev' && index === (currentSlide - 1 + slides.length) % slides.length) return styles.prev;\n    return '';\n  };\n  const handleQuickView = productId => {\n    setActiveQuickView(activeQuickView === productId ? null : productId);\n    setSelectedSize(null);\n    setSelectedColor(null);\n    setIs360View(false);\n    setRotationDegree(0);\n  };\n  const handle360Drag = e => {\n    if (is360View && rotationRef.current) {\n      const rect = rotationRef.current.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const percentage = x / rect.width;\n      const newDegree = Math.floor(percentage * 360);\n      setRotationDegree(newDegree);\n    }\n  };\n  const toggleView = () => {\n    setIs360View(!is360View);\n    setRotationDegree(0);\n  };\n  const renderQuickView = product => {\n    if (!product) return null;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.quickView,\n      onClick: e => e.stopPropagation(),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.quickViewContent,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.closeButton,\n          onClick: () => setActiveQuickView(null),\n          \"aria-label\": \"Close quick view\",\n          children: /*#__PURE__*/_jsxDEV(\"ion-icon\", {\n            name: \"close-outline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 559,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 554,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.productGallery,\n          children: is360View ? /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: rotationRef,\n            className: styles.view360,\n            onMouseMove: handle360Drag,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: product.images360[Math.floor(rotationDegree / (360 / product.images360.length))],\n              alt: `${product.name} - ${rotationDegree}Â° view`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 569,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.viewToggle,\n              onClick: toggleView,\n              \"aria-label\": \"Switch to standard view\",\n              children: /*#__PURE__*/_jsxDEV(\"ion-icon\", {\n                name: \"image-outline\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 578,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 573,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 564,\n            columnNumber: 15\n          }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.standardView,\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              src: product.image,\n              alt: product.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 583,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: styles.viewToggle,\n              onClick: toggleView,\n              \"aria-label\": \"Switch to 360\\xB0 view\",\n              children: /*#__PURE__*/_jsxDEV(\"ion-icon\", {\n                name: \"360-outline\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 589,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 584,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 582,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 562,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.productInfo,\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            children: product.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 596,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.priceWrapper,\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.price,\n              children: [\"$\", product.price]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 598,\n              columnNumber: 15\n            }, this), product.originalPrice && /*#__PURE__*/_jsxDEV(\"span\", {\n              className: styles.originalPrice,\n              children: [\"$\", product.originalPrice]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 600,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 597,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.sizeSelector,\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Select Size\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 605,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.sizeOptions,\n              children: product.sizes.map(size => /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `${styles.sizeOption} ${selectedSize === size ? styles.selected : ''}`,\n                onClick: () => setSelectedSize(size),\n                children: size\n              }, size, false, {\n                fileName: _jsxFileName,\n                lineNumber: 608,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 606,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 604,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.colorSelector,\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              children: \"Select Color\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 620,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.colorOptions,\n              children: product.colors.map(color => /*#__PURE__*/_jsxDEV(\"button\", {\n                className: `${styles.colorOption} ${selectedColor === color.name ? styles.selected : ''}`,\n                style: {\n                  '--color': color.code\n                },\n                onClick: () => setSelectedColor(color.name),\n                \"aria-label\": `Select ${color.name} color`,\n                children: selectedColor === color.name && /*#__PURE__*/_jsxDEV(\"ion-icon\", {\n                  name: \"checkmark-outline\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 631,\n                  columnNumber: 23\n                }, this)\n              }, color.name, false, {\n                fileName: _jsxFileName,\n                lineNumber: 623,\n                columnNumber: 19\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 621,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 619,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.features,\n            children: product.features.map((feature, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.feature,\n              children: [/*#__PURE__*/_jsxDEV(\"ion-icon\", {\n                name: \"checkmark-circle-outline\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 641,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                children: feature\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 642,\n                columnNumber: 19\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 640,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 638,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: styles.addToCart,\n            disabled: !selectedSize || !selectedColor,\n            children: [\"Add to Cart\", /*#__PURE__*/_jsxDEV(\"ion-icon\", {\n              name: \"bag-add-outline\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 652,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 647,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 595,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 553,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 552,\n      columnNumber: 7\n    }, this);\n  };\n  const renderHotspots = slide => {\n    if (!slide.hotspots) return null;\n    return slide.hotspots.map(hotspot => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `${styles.hotspot} ${styles[hotspot.type]} ${activeHotspot === hotspot.id ? styles.active : ''}`,\n      style: {\n        left: `${hotspot.x}%`,\n        top: `${hotspot.y}%`\n      },\n      onClick: e => {\n        e.stopPropagation();\n        if (hotspot.type === '360view') {\n          setIs360View(true);\n        } else {\n          setActiveHotspot(activeHotspot === hotspot.id ? null : hotspot.id);\n        }\n      },\n      \"data-id\": hotspot.id,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.hotspotIcon,\n        children: /*#__PURE__*/_jsxDEV(\"ion-icon\", {\n          name: hotspot.icon\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 679,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 678,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.hotspotContent,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          children: hotspot.title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 682,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: hotspot.description\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 683,\n          columnNumber: 11\n        }, this), hotspot.price && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.quickViewButton,\n          onClick: e => {\n            e.stopPropagation();\n            handleQuickView(slide.id);\n          },\n          children: [\"Quick View\", /*#__PURE__*/_jsxDEV(\"ion-icon\", {\n            name: \"eye-outline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 693,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 685,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 681,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.hotspotRing\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 697,\n        columnNumber: 9\n      }, this)]\n    }, hotspot.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 664,\n      columnNumber: 7\n    }, this));\n  };\n\n  // Preload images\n  useEffect(() => {\n    const preloadNextImage = index => {\n      const nextIndex = (index + 1) % slides.length;\n      const imageUrl = slides[nextIndex].image;\n      if (!preloadedImages.has(imageUrl)) {\n        const img = new Image();\n        img.src = imageUrl;\n        img.onload = () => {\n          setPreloadedImages(prev => new Set([...prev, imageUrl]));\n        };\n      }\n    };\n    preloadNextImage(currentSlide);\n  }, [currentSlide, slides, preloadedImages]);\n\n  // Parallax effect\n  useEffect(() => {\n    const handleScroll = () => {\n      if (parallaxRef.current) {\n        const scrolled = window.pageYOffset;\n        parallaxRef.current.style.transform = `translateY(${scrolled * 0.5}px)`;\n      }\n    };\n    window.addEventListener('scroll', handleScroll);\n    return () => window.removeEventListener('scroll', handleScroll);\n  }, []);\n\n  // Particle effect\n  useEffect(() => {\n    if (particlesRef.current) {\n      const canvas = particlesRef.current;\n      const ctx = canvas.getContext('2d');\n      const particles = [];\n      const createParticle = () => ({\n        x: Math.random() * canvas.width,\n        y: Math.random() * canvas.height,\n        size: Math.random() * 3 + 1,\n        speedX: Math.random() * 2 - 1,\n        speedY: Math.random() * 2 - 1,\n        opacity: Math.random() * 0.5 + 0.2\n      });\n      for (let i = 0; i < 50; i++) {\n        particles.push(createParticle());\n      }\n      const animate = () => {\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        particles.forEach(particle => {\n          particle.x += particle.speedX;\n          particle.y += particle.speedY;\n          if (particle.x < 0 || particle.x > canvas.width) particle.speedX *= -1;\n          if (particle.y < 0 || particle.y > canvas.height) particle.speedY *= -1;\n          ctx.beginPath();\n          ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);\n          ctx.fillStyle = `rgba(255, 255, 255, ${particle.opacity})`;\n          ctx.fill();\n        });\n        requestAnimationFrame(animate);\n      };\n      animate();\n    }\n  }, []);\n\n  // Skip link for accessibility\n  const handleSkipToContent = () => {\n    const mainContent = document.querySelector('main');\n    if (mainContent) {\n      mainContent.focus();\n      mainContent.scrollIntoView();\n    }\n  };\n\n  // Enhanced error handling for images\n  const handleImageError = imageUrl => {\n    setImageLoadErrors(prev => new Set([...prev, imageUrl]));\n    const currentRetries = retryCount[imageUrl] || 0;\n    if (currentRetries < 3) {\n      setRetryCount(prev => ({\n        ...prev,\n        [imageUrl]: currentRetries + 1\n      }));\n      setTimeout(() => {\n        const img = new Image();\n        img.src = imageUrl;\n        img.onload = () => {\n          setImageLoadErrors(prev => {\n            const newErrors = new Set(prev);\n            newErrors.delete(imageUrl);\n            return newErrors;\n          });\n        };\n      }, 2000 * (currentRetries + 1));\n    }\n  };\n\n  // Enhanced touch handling\n  const handleDoubleTap = e => {\n    const now = Date.now();\n    const timeDiff = now - lastTapTime;\n    if (timeDiff < 300) {\n      // Double tap detected\n      const touch = e.touches[0];\n      const element = document.elementFromPoint(touch.clientX, touch.clientY);\n      if (element.closest(`.${styles.imageWrapper}`)) {\n        if (isZoomed) {\n          setZoomLevel(1);\n          setIsZoomed(false);\n          setPanPosition({\n            x: 0,\n            y: 0\n          });\n        } else {\n          setZoomLevel(2);\n          setIsZoomed(true);\n          const rect = element.getBoundingClientRect();\n          setPanPosition({\n            x: (touch.clientX - rect.left) / rect.width * 100,\n            y: (touch.clientY - rect.top) / rect.height * 100\n          });\n        }\n      }\n    }\n    setLastTapTime(now);\n  };\n\n  // Enhanced pinch zoom\n  const handlePinchZoom = e => {\n    if (e.touches.length === 2) {\n      const touch1 = e.touches[0];\n      const touch2 = e.touches[1];\n      const distance = Math.hypot(touch2.clientX - touch1.clientX, touch2.clientY - touch1.clientY);\n      if (touchDistance) {\n        const scale = distance / touchDistance;\n        const newZoom = Math.max(1, Math.min(3, zoomLevel * scale));\n        setZoomLevel(newZoom);\n        if (newZoom > 1) {\n          setIsZoomed(true);\n          const centerX = (touch1.clientX + touch2.clientX) / 2;\n          const centerY = (touch1.clientY + touch2.clientY) / 2;\n          const rect = e.currentTarget.getBoundingClientRect();\n          setPanPosition({\n            x: (centerX - rect.left) / rect.width * 100,\n            y: (centerY - rect.top) / rect.height * 100\n          });\n        }\n      }\n      setTouchDistance(distance);\n    }\n  };\n\n  // Spring physics for slide transitions\n  useEffect(() => {\n    if (springRef.current) {\n      springRef.current.style.transition = 'none';\n      const animation = springRef.current.animate([{\n        transform: 'translateX(0)'\n      }, {\n        transform: `translateX(${direction === 'next' ? '-100%' : '100%'})`\n      }], {\n        duration: 800,\n        easing: 'cubic-bezier(0.4, 0, 0.2, 1)',\n        fill: 'forwards'\n      });\n      animation.onfinish = () => {\n        springRef.current.style.transform = `translateX(${direction === 'next' ? '-100%' : '100%'})`;\n      };\n    }\n  }, [currentSlide, direction]);\n\n  // Enhanced keyboard shortcuts\n  useEffect(() => {\n    const handleKeyboardShortcuts = e => {\n      if (e.altKey) {\n        switch (e.key) {\n          case 'z':\n            handleZoomIn();\n            break;\n          case 'x':\n            handleZoomOut();\n            break;\n          case 'r':\n            setZoomLevel(1);\n            setIsZoomed(false);\n            setPanPosition({\n              x: 0,\n              y: 0\n            });\n            break;\n          case 'p':\n            setIsAutoPlaying(prev => !prev);\n            break;\n          default:\n            break;\n        }\n      }\n    };\n    window.addEventListener('keydown', handleKeyboardShortcuts);\n    return () => window.removeEventListener('keydown', handleKeyboardShortcuts);\n  }, []);\n\n  // Enhanced error boundary\n  useEffect(() => {\n    const handleError = error => {\n      console.error('Hero component error:', error);\n      setError(error);\n    };\n    window.addEventListener('error', handleError);\n    return () => window.removeEventListener('error', handleError);\n  }, []);\n\n  // Move preloadVisibleImages before it's used\n  const preloadVisibleImages = useCallback(() => {\n    if (!isInView) return;\n\n    // Preload current and adjacent slides\n    const indicesToPreload = [currentSlide, (currentSlide + 1) % slides.length, (currentSlide - 1 + slides.length) % slides.length];\n    indicesToPreload.forEach(index => {\n      const slide = slides[index];\n      if (slide && !preloadedImages.has(slide.image)) {\n        var _slide$product;\n        const img = new Image();\n        img.src = slide.image;\n        img.onload = () => {\n          setPreloadedImages(prev => new Set([...prev, slide.image]));\n        };\n\n        // If slide has 360 view images, preload those too\n        if ((_slide$product = slide.product) !== null && _slide$product !== void 0 && _slide$product.images360) {\n          slide.product.images360.forEach(imageUrl => {\n            if (!preloadedImages.has(imageUrl)) {\n              const img360 = new Image();\n              img360.src = imageUrl;\n              img360.onload = () => {\n                setPreloadedImages(prev => new Set([...prev, imageUrl]));\n              };\n            }\n          });\n        }\n      }\n    });\n  }, [currentSlide, slides, isInView, preloadedImages]);\n\n  // Enhanced particle animation with performance optimization\n  const startParticleAnimation = useCallback(() => {\n    if (!particlesRef.current || !isInView) return;\n    const ctx = particlesRef.current.getContext('2d');\n    const particles = new Float32Array(150); // Use typed arrays for better performance\n    let lastTime = performance.now();\n    const animate = currentTime => {\n      const deltaTime = currentTime - lastTime;\n      lastTime = currentTime;\n      ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\n      for (let i = 0; i < particles.length; i += 5) {\n        particles[i] += particles[i + 2] * deltaTime * 0.06;\n        particles[i + 1] += particles[i + 3] * deltaTime * 0.06;\n        if (particles[i] < 0 || particles[i] > ctx.canvas.width) particles[i + 2] *= -1;\n        if (particles[i + 1] < 0 || particles[i + 1] > ctx.canvas.height) particles[i + 3] *= -1;\n        ctx.globalAlpha = particles[i + 4];\n        ctx.beginPath();\n        ctx.arc(particles[i], particles[i + 1], 2, 0, Math.PI * 2);\n        ctx.fill();\n      }\n      animationFrameId.current = requestAnimationFrame(animate);\n    };\n\n    // Initialize particles\n    for (let i = 0; i < particles.length; i += 5) {\n      particles[i] = Math.random() * ctx.canvas.width; // x\n      particles[i + 1] = Math.random() * ctx.canvas.height; // y\n      particles[i + 2] = Math.random() * 2 - 1; // speedX\n      particles[i + 3] = Math.random() * 2 - 1; // speedY\n      particles[i + 4] = Math.random() * 0.3 + 0.2; // opacity\n    }\n    animate(performance.now());\n  }, [isInView]);\n  const stopParticleAnimation = useCallback(() => {\n    if (animationFrameId.current) {\n      cancelAnimationFrame(animationFrameId.current);\n    }\n  }, []);\n\n  // Now the Intersection Observer setup can use preloadVisibleImages\n  useEffect(() => {\n    intersectionObserver.current = new IntersectionObserver(entries => {\n      entries.forEach(entry => {\n        setIsInView(entry.isIntersecting);\n        if (entry.isIntersecting) {\n          // Start animations and load resources\n          startParticleAnimation();\n          preloadVisibleImages();\n        } else {\n          // Cleanup when not in view\n          stopParticleAnimation();\n        }\n      });\n    }, INTERSECTION_OPTIONS);\n    if (sliderRef.current) {\n      intersectionObserver.current.observe(sliderRef.current);\n    }\n    return () => {\n      if (intersectionObserver.current) {\n        intersectionObserver.current.disconnect();\n      }\n    };\n  }, [startParticleAnimation, preloadVisibleImages, stopParticleAnimation]);\n\n  // Network status monitoring\n  useEffect(() => {\n    const handleOnline = () => setNetworkStatus(true);\n    const handleOffline = () => setNetworkStatus(false);\n    window.addEventListener('online', handleOnline);\n    window.addEventListener('offline', handleOffline);\n    return () => {\n      window.removeEventListener('online', handleOnline);\n      window.removeEventListener('offline', handleOffline);\n    };\n  }, []);\n\n  // Enhanced keyboard navigation\n  const handleKeyboardNav = useCallback(e => {\n    const actions = {\n      ArrowLeft: {\n        fn: prevSlide,\n        label: 'Previous slide',\n        description: slides[(currentSlide - 1 + slides.length) % slides.length].title\n      },\n      ArrowRight: {\n        fn: nextSlide,\n        label: 'Next slide',\n        description: slides[(currentSlide + 1) % slides.length].title\n      },\n      ArrowUp: {\n        fn: handleZoomIn,\n        label: 'Zoom in'\n      },\n      ArrowDown: {\n        fn: handleZoomOut,\n        label: 'Zoom out'\n      },\n      ' ': {\n        fn: () => setIsAutoPlaying(prev => !prev),\n        label: 'Toggle autoplay'\n      },\n      Home: {\n        fn: () => goToSlide(0),\n        label: 'First slide'\n      },\n      End: {\n        fn: () => goToSlide(slides.length - 1),\n        label: 'Last slide'\n      }\n    };\n    const action = actions[e.key];\n    if (action && document.activeElement === sliderRef.current) {\n      e.preventDefault();\n      startTransition(() => {\n        action.fn();\n      });\n      announce(`${action.label}${action.description ? `: ${action.description}` : ''}`);\n    }\n  }, [slides, currentSlide, announce, prevSlide, nextSlide, handleZoomIn, handleZoomOut, goToSlide]);\n\n  // Sound effects (optional)\n  const playSound = useCallback(type => {\n    if (!window.AudioContext) return;\n    const audioContext = new AudioContext();\n    const oscillator = audioContext.createOscillator();\n    const gainNode = audioContext.createGain();\n    oscillator.connect(gainNode);\n    gainNode.connect(audioContext.destination);\n    const sounds = {\n      slide: {\n        frequency: 440,\n        duration: 0.15\n      },\n      zoom: {\n        frequency: 660,\n        duration: 0.1\n      },\n      error: {\n        frequency: 220,\n        duration: 0.3\n      }\n    };\n    const sound = sounds[type];\n    if (sound) {\n      oscillator.frequency.value = sound.frequency;\n      gainNode.gain.value = 0.1;\n      oscillator.start();\n      oscillator.stop(audioContext.currentTime + sound.duration);\n    }\n  }, []);\n\n  // Enhanced error handling\n  const handleError = useCallback((error, context) => {\n    console.error(`Error in ${context}:`, error);\n    setError(error);\n    playSound('error');\n\n    // Attempt recovery based on context\n    switch (context) {\n      case 'image':\n        handleImageError(error.target.src);\n        break;\n      case 'animation':\n        stopParticleAnimation();\n        startParticleAnimation();\n        break;\n      default:\n        // Generic error recovery\n        setIsAutoPlaying(false);\n        setZoomLevel(ZOOM_LEVELS.MIN);\n        setPanPosition({\n          x: 0,\n          y: 0\n        });\n    }\n  }, []);\n\n  // Add announceAction function\n  const announceAction = useCallback(message => {\n    setAnnounceMessage(message);\n    // Clear the announcement after a delay\n    setTimeout(() => {\n      setAnnounceMessage('');\n    }, 1000);\n  }, []);\n\n  // Enhanced slide transition with momentum\n  const handleSlideTransition = useCallback(direction => {\n    const velocity = momentum.velocity;\n    const now = Date.now();\n    const timeDelta = now - momentum.timestamp;\n    if (Math.abs(velocity) > 0.5 && timeDelta < 300) {\n      // Use momentum to determine slide direction\n      const targetDirection = velocity > 0 ? 'next' : 'prev';\n      startTransition(() => {\n        if (targetDirection === 'next') {\n          nextSlide();\n        } else {\n          prevSlide();\n        }\n      });\n    } else {\n      // Normal slide transition\n      startTransition(() => {\n        if (direction === 'next') {\n          nextSlide();\n        } else {\n          prevSlide();\n        }\n      });\n    }\n  }, [momentum, nextSlide, prevSlide]);\n\n  // Add ResizeObserver for responsive handling\n  useEffect(() => {\n    resizeObserver.current = new ResizeObserver(entries => {\n      for (const entry of entries) {\n        const {\n          width\n        } = entry.contentRect;\n        // Update layout based on new size\n        updateLayout(width);\n      }\n    });\n    if (sliderRef.current) {\n      resizeObserver.current.observe(sliderRef.current);\n    }\n    return () => {\n      if (resizeObserver.current) {\n        resizeObserver.current.disconnect();\n      }\n    };\n  }, []);\n\n  // Enhanced magnetic snap points\n  const updateSnapPoints = useCallback(() => {\n    if (!sliderRef.current) return;\n    const sliderWidth = sliderRef.current.offsetWidth;\n    snapPoints.current.clear();\n    slides.forEach((_, index) => {\n      snapPoints.current.set(index, index * sliderWidth);\n    });\n  }, [slides.length]);\n  useEffect(() => {\n    updateSnapPoints();\n    window.addEventListener('resize', updateSnapPoints);\n    return () => window.removeEventListener('resize', updateSnapPoints);\n  }, [updateSnapPoints]);\n\n  // Enhanced preview thumbnails\n  const renderPreviews = useCallback(() => {\n    return slides.map((slide, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n      className: `${styles.preview} ${index === currentSlide ? styles.active : ''}`,\n      onClick: () => {\n        startTransition(() => {\n          goToSlide(index);\n        });\n      },\n      onMouseEnter: () => {\n        // Preload image on hover\n        const img = new Image();\n        img.src = slide.image;\n      },\n      \"aria-label\": `Preview of ${slide.title}${index === currentSlide ? ' (Current)' : ''}`,\n      role: \"tab\",\n      \"aria-selected\": index === currentSlide,\n      tabIndex: index === currentSlide ? 0 : -1,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.previewProgress,\n        role: \"presentation\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.previewProgressFill,\n          style: {\n            width: index === currentSlide ? `${progress}%` : '0%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1218,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1217,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: slide.image,\n        alt: \"\",\n        className: styles.previewImage,\n        loading: \"lazy\",\n        role: \"presentation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1225,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.previewOverlay,\n        role: \"presentation\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1232,\n        columnNumber: 9\n      }, this)]\n    }, slide.id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1199,\n      columnNumber: 7\n    }, this));\n  }, [slides, currentSlide, progress, goToSlide]);\n\n  // Enhanced accessibility announcements\n  const announce = useCallback((message, priority = 'polite') => {\n    const announcer = document.createElement('div');\n    announcer.setAttribute('aria-live', priority);\n    announcer.setAttribute('aria-atomic', 'true');\n    announcer.setAttribute('class', styles.visuallyHidden);\n    document.body.appendChild(announcer);\n\n    // Use two updates to ensure reliable announcement\n    setTimeout(() => {\n      announcer.textContent = message;\n    }, 50);\n    setTimeout(() => {\n      document.body.removeChild(announcer);\n    }, 1000);\n  }, []);\n\n  // Add updateLayout function before the ResizeObserver effect\n  const updateLayout = useCallback(width => {\n    if (!sliderRef.current) return;\n\n    // Update layout based on viewport width\n    const isMobile = width < 768;\n    const isTablet = width >= 768 && width < 1200;\n\n    // Update slide dimensions\n    const slides = sliderRef.current.querySelectorAll(`.${styles.slide}`);\n    slides.forEach(slide => {\n      const content = slide.querySelector(`.${styles.content}`);\n      const imageWrapper = slide.querySelector(`.${styles.imageWrapper}`);\n      if (isMobile) {\n        content.style.maxWidth = '100%';\n        imageWrapper.style.width = '100%';\n      } else if (isTablet) {\n        content.style.maxWidth = '50%';\n        imageWrapper.style.width = '55%';\n      } else {\n        content.style.maxWidth = '600px';\n        imageWrapper.style.width = '65%';\n      }\n    });\n\n    // Update hotspot positions\n    const hotspots = sliderRef.current.querySelectorAll(`.${styles.hotspot}`);\n    hotspots.forEach(hotspot => {\n      const x = parseFloat(hotspot.style.left);\n      const y = parseFloat(hotspot.style.top);\n      if (isMobile) {\n        hotspot.style.transform = `translate(-50%, -50%) scale(0.8)`;\n      } else {\n        hotspot.style.transform = `translate(-50%, -50%)`;\n      }\n    });\n\n    // Update preview container\n    const previewContainer = sliderRef.current.querySelector(`.${styles.previewContainer}`);\n    if (previewContainer) {\n      if (isMobile) {\n        previewContainer.style.bottom = '5rem';\n        previewContainer.style.right = '50%';\n        previewContainer.style.transform = 'translateX(50%) translateZ(100px)';\n      } else {\n        previewContainer.style.bottom = '6rem';\n        previewContainer.style.right = '4rem';\n        previewContainer.style.transform = 'translateZ(100px)';\n      }\n    }\n\n    // Update controls position\n    const controls = sliderRef.current.querySelector(`.${styles.controls}`);\n    if (controls) {\n      if (isMobile) {\n        controls.style.left = '2rem';\n        controls.style.bottom = '1.5rem';\n      } else {\n        controls.style.left = '4rem';\n        controls.style.bottom = '2.5rem';\n      }\n    }\n\n    // Update snap points after layout changes\n    updateSnapPoints();\n  }, [updateSnapPoints]);\n  return /*#__PURE__*/_jsxDEV(ErrorBoundary, {\n    onError: handleError,\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleSkipToContent,\n      className: styles.skipLink,\n      children: \"Skip to main content\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1326,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      role: \"status\",\n      \"aria-live\": \"polite\",\n      className: styles.visuallyHidden,\n      children: announceMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1333,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      ref: sliderRef,\n      className: `${styles.hero} ${isPending ? styles.pending : ''}`,\n      style: {\n        contain: 'content',\n        cursor: isDragging ? 'grabbing' : isZoomed ? 'grab' : 'default'\n      },\n      onMouseEnter: handleMouseEnter,\n      onMouseLeave: handleMouseLeave,\n      onKeyDown: handleKeyDown,\n      onTouchStart: handleTouchStart,\n      onTouchMove: handleTouchMove,\n      onTouchEnd: handleTouchEnd,\n      onMouseDown: handleMouseDown,\n      onMouseMove: handleMouseMove,\n      onMouseUp: handleMouseUp,\n      onWheel: handleWheel,\n      tabIndex: \"0\",\n      role: \"region\",\n      \"aria-label\": `Hero Slider with ${slides.length} slides. Use arrow keys to navigate. Press Space or Enter to toggle autoplay.`,\n      \"aria-roledescription\": \"carousel\",\n      children: [/*#__PURE__*/_jsxDEV(\"canvas\", {\n        ref: particlesRef,\n        className: styles.particles,\n        \"aria-hidden\": \"true\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1363,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: parallaxRef,\n        className: styles.parallaxWrapper,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.slider,\n          children: slides.map((slide, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: el => slideRefs.current[index] = el,\n            className: `${styles.slide} ${getSlideClassName(index)}`,\n            style: {\n              '--slide-color': slide.color\n            },\n            role: \"group\",\n            \"aria-roledescription\": \"slide\",\n            \"aria-label\": `${index + 1} of ${slides.length}: ${slide.title}`,\n            \"aria-hidden\": index !== currentSlide,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.content,\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: styles.subtitle,\n                role: \"text\",\n                children: slide.subtitle\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1388,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n                className: styles.title,\n                children: slide.title\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1389,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: styles.description,\n                children: slide.description\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1390,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(Link, {\n                to: \"/shop\",\n                className: styles.cta,\n                \"aria-label\": `${slide.cta} - ${slide.title}`,\n                children: [slide.cta, /*#__PURE__*/_jsxDEV(\"ion-icon\", {\n                  name: \"arrow-forward-outline\",\n                  \"aria-hidden\": \"true\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1397,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1391,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1387,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.imageWrapper,\n              children: [/*#__PURE__*/_jsxDEV(\"picture\", {\n                children: [/*#__PURE__*/_jsxDEV(\"source\", {\n                  media: \"(min-width: 1200px)\",\n                  srcSet: `${slide.image}?width=1600&quality=80 1x, ${slide.image}?width=3200&quality=80 2x`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1403,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"source\", {\n                  media: \"(min-width: 768px)\",\n                  srcSet: `${slide.image}?width=1200&quality=80 1x, ${slide.image}?width=2400&quality=80 2x`\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1407,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: `${slide.image}?width=800&quality=80`,\n                  alt: slide.title,\n                  loading: index === currentSlide ? \"eager\" : \"lazy\",\n                  onError: () => handleImageError(slide.image),\n                  className: styles.slideImage,\n                  style: {\n                    opacity: imageLoadErrors.has(slide.image) ? 0.5 : 1\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1411,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1402,\n                columnNumber: 19\n              }, this), imageLoadErrors.has(slide.image) && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.imageError,\n                children: [/*#__PURE__*/_jsxDEV(\"ion-icon\", {\n                  name: \"warning-outline\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1424,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  children: \"Image failed to load\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1425,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  onClick: () => {\n                    setImageLoadErrors(prev => {\n                      const newErrors = new Set(prev);\n                      newErrors.delete(slide.image);\n                      return newErrors;\n                    });\n                    setRetryCount(prev => ({\n                      ...prev,\n                      [slide.image]: 0\n                    }));\n                  },\n                  children: \"Retry\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 1426,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 1423,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 1401,\n              columnNumber: 17\n            }, this), activeQuickView === slide.id && slide.product && /*#__PURE__*/_jsxDEV(Suspense, {\n              fallback: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.loading,\n                children: \"Loading...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1443,\n                columnNumber: 39\n              }, this),\n              children: /*#__PURE__*/_jsxDEV(QuickView, {\n                product: slide.product,\n                onClose: () => setActiveQuickView(null)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 1444,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 1443,\n              columnNumber: 19\n            }, this)]\n          }, slide.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 1375,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1373,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1369,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.controls,\n        role: \"group\",\n        \"aria-label\": \"Slider controls\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: `${styles.arrow} ${styles.prev}`,\n          onClick: prevSlide,\n          \"aria-label\": \"Previous slide\",\n          \"aria-controls\": \"hero-slider\",\n          children: /*#__PURE__*/_jsxDEV(\"ion-icon\", {\n            name: \"chevron-back-outline\",\n            \"aria-hidden\": \"true\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1466,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1460,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.indicators,\n          role: \"group\",\n          \"aria-label\": \"Slide indicators\",\n          children: slides.map((_, index) => /*#__PURE__*/_jsxDEV(\"button\", {\n            className: `${styles.indicator} ${index === currentSlide ? styles.active : ''}`,\n            onClick: () => goToSlide(index),\n            \"aria-label\": `Go to slide ${index + 1}`,\n            \"aria-current\": index === currentSlide,\n            \"aria-controls\": \"hero-slider\"\n          }, index, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1474,\n            columnNumber: 15\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1468,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: `${styles.arrow} ${styles.next}`,\n          onClick: nextSlide,\n          \"aria-label\": \"Next slide\",\n          \"aria-controls\": \"hero-slider\",\n          children: /*#__PURE__*/_jsxDEV(\"ion-icon\", {\n            name: \"chevron-forward-outline\",\n            \"aria-hidden\": \"true\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1490,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1484,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1455,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.zoomControl,\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.zoomButton,\n          onClick: handleZoomIn,\n          disabled: zoomLevel >= 3,\n          \"aria-label\": \"Zoom in\",\n          children: /*#__PURE__*/_jsxDEV(\"ion-icon\", {\n            name: \"add-outline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1501,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1495,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.zoomButton,\n          onClick: handleZoomOut,\n          disabled: zoomLevel <= 1,\n          \"aria-label\": \"Zoom out\",\n          children: /*#__PURE__*/_jsxDEV(\"ion-icon\", {\n            name: \"remove-outline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1509,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1503,\n          columnNumber: 11\n        }, this), isZoomed && /*#__PURE__*/_jsxDEV(\"button\", {\n          className: styles.zoomButton,\n          onClick: () => {\n            setZoomLevel(1);\n            setIsZoomed(false);\n            setPanPosition({\n              x: 0,\n              y: 0\n            });\n          },\n          \"aria-label\": \"Reset zoom\",\n          children: /*#__PURE__*/_jsxDEV(\"ion-icon\", {\n            name: \"refresh-outline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 1521,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1512,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1494,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.previewContainer,\n        children: renderPreviews()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1526,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.progressBar,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.progressFill,\n          style: {\n            width: `${progress}%`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1531,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 1530,\n        columnNumber: 9\n      }, this), isPending && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: styles.loadingIndicator,\n        role: \"status\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: styles.loadingSpinner,\n          role: \"presentation\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1539,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: styles.visuallyHidden,\n          children: \"Loading next slide...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 1540,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 1538,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 1341,\n      columnNumber: 7\n    }, this), !networkStatus && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.networkError,\n      children: \"You're offline. Some features may be limited.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 1545,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 1325,\n    columnNumber: 5\n  }, this);\n};\n_s(Hero, \"7mQJjCufZVt5bBS9ew0Kkf9Ejl8=\", false, function () {\n  return [useTransition];\n});\n_c3 = Hero;\nexport default Hero;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"QuickView$lazy\");\n$RefreshReg$(_c2, \"QuickView\");\n$RefreshReg$(_c3, \"Hero\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","lazy","Suspense","useMemo","useTransition","startTransition","Link","styles","ErrorBoundary","jsxDEV","_jsxDEV","ZOOM_LEVELS","MIN","MAX","STEP","ANIMATION_SPRING","tension","friction","RETRY_DELAYS","INTERSECTION_OPTIONS","root","rootMargin","threshold","QuickView","_c","_c2","Hero","_s","currentSlide","setCurrentSlide","isAutoPlaying","setIsAutoPlaying","direction","setDirection","touchStart","setTouchStart","touchEnd","setTouchEnd","isZoomed","setIsZoomed","progress","setProgress","zoomLevel","setZoomLevel","panPosition","setPanPosition","x","y","isDragging","setIsDragging","dragStart","setDragStart","activeHotspot","setActiveHotspot","touchMoveCount","setTouchMoveCount","pinchStart","setPinchStart","touchTimeout","sliderRef","progressInterval","imageRef","activeQuickView","setActiveQuickView","selectedSize","setSelectedSize","selectedColor","setSelectedColor","is360View","setIs360View","rotationDegree","setRotationDegree","rotationRef","announceMessage","setAnnounceMessage","focusedElement","setFocusedElement","announceRef","slideRefs","isLoading","setIsLoading","swipeVelocity","setSwipeVelocity","lastTouchTime","setLastTouchTime","lastTouchX","setLastTouchX","preloadedImages","setPreloadedImages","Set","parallaxRef","particlesRef","imageLoadErrors","setImageLoadErrors","retryCount","setRetryCount","springRef","touchDistance","setTouchDistance","lastTapTime","setLastTapTime","error","setError","isInView","setIsInView","networkStatus","setNetworkStatus","navigator","onLine","recycledSlides","setRecycledSlides","intersectionObserver","animationFrameId","transformCache","Map","isPending","resizeObserver","momentum","setMomentum","velocity","timestamp","snapPoints","slides","id","title","subtitle","description","cta","image","color","product","name","price","originalPrice","sizes","colors","code","images360","features","hotspots","icon","type","slideStyles","map","slide","index","transform","current","get","opacity","length","announceSlideChange","message","nextSlide","prev","newIndex","prevSlide","goToSlide","interval","setInterval","clearInterval","handleMouseEnter","handleMouseLeave","handleKeyDown","e","key","Math","max","min","preventDefault","handleTabKey","shiftKey","announceAutoplayState","focusableElements","getFocusableElements","firstElement","lastElement","document","activeElement","focus","modal","querySelector","quickView","Array","from","querySelectorAll","isPlaying","_sliderRef$current","timeoutId","setTimeout","clearTimeout","handleZoomIn","handleZoomOut","newZoom","handleMouseDown","clientX","clientY","handleMouseMove","_imageRef$current","_imageRef$current2","maxPanX","offsetWidth","maxPanY","offsetHeight","newX","newY","handleMouseUp","handleWheel","ctrlKey","delta","sign","deltaY","handleKeyZoom","window","addEventListener","removeEventListener","handleTouchStart","Date","now","touches","distance","hypot","zoom","handleTouchMove","currentTime","currentX","timeDiff","scale","handleTouchEnd","handleSlideTransition","slider","getSlideClassName","active","next","handleQuickView","productId","handle360Drag","rect","getBoundingClientRect","left","percentage","width","newDegree","floor","toggleView","renderQuickView","className","onClick","stopPropagation","children","quickViewContent","closeButton","fileName","_jsxFileName","lineNumber","columnNumber","productGallery","ref","view360","onMouseMove","src","alt","viewToggle","standardView","productInfo","priceWrapper","sizeSelector","sizeOptions","size","sizeOption","selected","colorSelector","colorOptions","colorOption","style","feature","addToCart","disabled","renderHotspots","hotspot","top","hotspotIcon","hotspotContent","quickViewButton","hotspotRing","preloadNextImage","nextIndex","imageUrl","has","img","Image","onload","handleScroll","scrolled","pageYOffset","canvas","ctx","getContext","particles","createParticle","random","height","speedX","speedY","i","push","animate","clearRect","forEach","particle","beginPath","arc","PI","fillStyle","fill","requestAnimationFrame","handleSkipToContent","mainContent","scrollIntoView","handleImageError","currentRetries","newErrors","delete","handleDoubleTap","touch","element","elementFromPoint","closest","imageWrapper","handlePinchZoom","touch1","touch2","centerX","centerY","currentTarget","transition","animation","duration","easing","onfinish","handleKeyboardShortcuts","altKey","handleError","console","preloadVisibleImages","indicesToPreload","_slide$product","img360","startParticleAnimation","Float32Array","lastTime","performance","deltaTime","globalAlpha","stopParticleAnimation","cancelAnimationFrame","IntersectionObserver","entries","entry","isIntersecting","observe","disconnect","handleOnline","handleOffline","handleKeyboardNav","actions","ArrowLeft","fn","label","ArrowRight","ArrowUp","ArrowDown","Home","End","action","announce","playSound","AudioContext","audioContext","oscillator","createOscillator","gainNode","createGain","connect","destination","sounds","frequency","sound","value","gain","start","stop","context","target","announceAction","timeDelta","abs","targetDirection","ResizeObserver","contentRect","updateLayout","updateSnapPoints","sliderWidth","clear","_","set","renderPreviews","preview","onMouseEnter","role","tabIndex","previewProgress","previewProgressFill","previewImage","loading","previewOverlay","priority","announcer","createElement","setAttribute","visuallyHidden","body","appendChild","textContent","removeChild","isMobile","isTablet","content","maxWidth","parseFloat","previewContainer","bottom","right","controls","onError","skipLink","hero","pending","contain","cursor","onMouseLeave","onKeyDown","onTouchStart","onTouchMove","onTouchEnd","onMouseDown","onMouseUp","onWheel","parallaxWrapper","el","to","media","srcSet","slideImage","imageError","fallback","onClose","arrow","indicators","indicator","zoomControl","zoomButton","progressBar","progressFill","loadingIndicator","loadingSpinner","networkError","_c3","$RefreshReg$"],"sources":["C:/Users/kaybe/Downloads/Sneakeralot-ecommerce-website-main/client/src/components/layout/Hero/Hero.js"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef, lazy, Suspense, useMemo, useTransition, startTransition } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport styles from './Hero.module.css';\r\nimport ErrorBoundary from './ErrorBoundary';\r\n\r\n// Constants for better performance\r\nconst ZOOM_LEVELS = { MIN: 1, MAX: 3, STEP: 0.5 };\r\nconst ANIMATION_SPRING = { tension: 170, friction: 26 };\r\nconst RETRY_DELAYS = [2000, 4000, 8000];\r\nconst INTERSECTION_OPTIONS = {\r\n  root: null,\r\n  rootMargin: '50px',\r\n  threshold: 0.1\r\n};\r\n\r\n// Lazy load components\r\nconst QuickView = lazy(() => import('./QuickView'));\r\n\r\nconst Hero = () => {\r\n  const [currentSlide, setCurrentSlide] = useState(0);\r\n  const [isAutoPlaying, setIsAutoPlaying] = useState(true);\r\n  const [direction, setDirection] = useState('next');\r\n  const [touchStart, setTouchStart] = useState(null);\r\n  const [touchEnd, setTouchEnd] = useState(null);\r\n  const [isZoomed, setIsZoomed] = useState(false);\r\n  const [progress, setProgress] = useState(0);\r\n  const [zoomLevel, setZoomLevel] = useState(1);\r\n  const [panPosition, setPanPosition] = useState({ x: 0, y: 0 });\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [dragStart, setDragStart] = useState({ x: 0, y: 0 });\r\n  const [activeHotspot, setActiveHotspot] = useState(null);\r\n  const [touchMoveCount, setTouchMoveCount] = useState(0);\r\n  const [pinchStart, setPinchStart] = useState(null);\r\n  const touchTimeout = useRef(null);\r\n  const sliderRef = useRef(null);\r\n  const progressInterval = useRef(null);\r\n  const imageRef = useRef(null);\r\n  const [activeQuickView, setActiveQuickView] = useState(null);\r\n  const [selectedSize, setSelectedSize] = useState(null);\r\n  const [selectedColor, setSelectedColor] = useState(null);\r\n  const [is360View, setIs360View] = useState(false);\r\n  const [rotationDegree, setRotationDegree] = useState(0);\r\n  const rotationRef = useRef(null);\r\n  const [announceMessage, setAnnounceMessage] = useState('');\r\n  const [focusedElement, setFocusedElement] = useState(null);\r\n  const announceRef = useRef(null);\r\n  const slideRefs = useRef([]);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [swipeVelocity, setSwipeVelocity] = useState(0);\r\n  const [lastTouchTime, setLastTouchTime] = useState(0);\r\n  const [lastTouchX, setLastTouchX] = useState(0);\r\n  const [preloadedImages, setPreloadedImages] = useState(new Set());\r\n  const parallaxRef = useRef(null);\r\n  const particlesRef = useRef(null);\r\n  const [imageLoadErrors, setImageLoadErrors] = useState(new Set());\r\n  const [retryCount, setRetryCount] = useState({});\r\n  const springRef = useRef(null);\r\n  const [touchDistance, setTouchDistance] = useState(0);\r\n  const [lastTapTime, setLastTapTime] = useState(0);\r\n  const [error, setError] = useState(null);\r\n\r\n  // Performance optimizations\r\n  const [isInView, setIsInView] = useState(false);\r\n  const [networkStatus, setNetworkStatus] = useState(navigator.onLine);\r\n  const [recycledSlides, setRecycledSlides] = useState(new Set());\r\n  const intersectionObserver = useRef(null);\r\n  const animationFrameId = useRef(null);\r\n  const transformCache = useRef(new Map());\r\n\r\n  // Add useTransition for smoother state updates\r\n  const [isPending, startTransition] = useTransition();\r\n  \r\n  // Add ResizeObserver ref\r\n  const resizeObserver = useRef(null);\r\n  \r\n  // Add momentum scrolling state\r\n  const [momentum, setMomentum] = useState({ velocity: 0, timestamp: 0 });\r\n  \r\n  // Add magnetic snap points\r\n  const snapPoints = useRef(new Map());\r\n\r\n  const slides = [\r\n    {\r\n      id: 1,\r\n      title: \"Summer Collection 2024\",\r\n      subtitle: \"Step into Style\",\r\n      description: \"Discover the latest trends in sneaker fashion with our curated summer collection\",\r\n      cta: \"Shop Now\",\r\n      image: \"/images/hero/slide1.jpg\",\r\n      color: \"#FF4D4D\",\r\n      product: {\r\n        name: \"Air Max Pulse\",\r\n        price: 179.99,\r\n        originalPrice: 199.99,\r\n        sizes: [\"US 7\", \"US 8\", \"US 9\", \"US 10\", \"US 11\"],\r\n        colors: [\r\n          { name: \"Obsidian\", code: \"#1a237e\" },\r\n          { name: \"Crimson\", code: \"#d32f2f\" },\r\n          { name: \"Platinum\", code: \"#e0e0e0\" }\r\n        ],\r\n        images360: [\r\n          \"/images/hero/slide1.jpg\",\r\n          \"/images/hero/slide1.jpg\",\r\n          \"/images/hero/slide1.jpg\"\r\n        ],\r\n        features: [\"Responsive Cushioning\", \"Breathable Mesh\", \"Durable Outsole\"]\r\n      },\r\n      hotspots: [\r\n        {\r\n          id: 'hs1',\r\n          x: 25,\r\n          y: 45,\r\n          title: 'Premium Materials',\r\n          description: 'Made with genuine leather and premium textiles',\r\n          icon: 'diamond-outline',\r\n          type: 'material'\r\n        },\r\n        {\r\n          id: 'hs2',\r\n          x: 65,\r\n          y: 70,\r\n          title: 'Comfort Technology',\r\n          description: 'Advanced cushioning system for all-day comfort',\r\n          icon: 'fitness-outline',\r\n          type: 'feature',\r\n          price: 179.99\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 2,\r\n      title: \"Limited Edition Drops\",\r\n      subtitle: \"Exclusive Collection\",\r\n      description: \"Get your hands on rare and exclusive sneakers before they're gone\",\r\n      cta: \"View Collection\",\r\n      image: \"/images/hero/slide2.jpg\",\r\n      color: \"#4D7FFF\",\r\n      product: {\r\n        name: \"Limited Edition Runner\",\r\n        price: 199.99,\r\n        sizes: [\"US 8\", \"US 9\", \"US 10\"],\r\n        colors: [\r\n          { name: \"Gold\", code: \"#FFD700\" },\r\n          { name: \"Silver\", code: \"#C0C0C0\" }\r\n        ],\r\n        images360: [\r\n          \"/images/hero/slide2.jpg\",\r\n          \"/images/hero/slide2.jpg\",\r\n          \"/images/hero/slide2.jpg\"\r\n        ],\r\n        features: [\"Limited Edition\", \"Numbered Series\", \"Certificate of Authenticity\"]\r\n      },\r\n      hotspots: [\r\n        {\r\n          id: 'hs3',\r\n          x: 35,\r\n          y: 60,\r\n          title: 'Limited Edition',\r\n          description: 'Only 100 pairs available worldwide',\r\n          icon: 'star-outline',\r\n          type: 'feature'\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id: 3,\r\n      title: \"New Arrivals\",\r\n      subtitle: \"Fresh Kicks\",\r\n      description: \"Be the first to wear the newest releases from top brands\",\r\n      cta: \"Explore Now\",\r\n      image: \"/images/hero/slide3.jpg\",\r\n      color: \"#FFB84D\",\r\n      product: {\r\n        name: \"Fresh Release\",\r\n        price: 159.99,\r\n        sizes: [\"US 7\", \"US 8\", \"US 9\", \"US 10\", \"US 11\"],\r\n        colors: [\r\n          { name: \"White\", code: \"#FFFFFF\" },\r\n          { name: \"Black\", code: \"#000000\" }\r\n        ],\r\n        images360: [\r\n          \"/images/hero/slide3.jpg\",\r\n          \"/images/hero/slide3.jpg\",\r\n          \"/images/hero/slide3.jpg\"\r\n        ],\r\n        features: [\"New Release\", \"Modern Design\", \"Premium Quality\"]\r\n      }\r\n    }\r\n  ];\r\n\r\n  // Memoized computations\r\n  const slideStyles = useMemo(() => {\r\n    return slides.map((slide, index) => ({\r\n      transform: transformCache.current.get(index) || 'none',\r\n      opacity: index === currentSlide ? 1 : 0\r\n    }));\r\n  }, [currentSlide, slides.length]);\r\n\r\n  const announceSlideChange = useCallback((index) => {\r\n    const slide = slides[index];\r\n    const message = `Now showing slide ${index + 1} of ${slides.length}: ${slide.title}. ${slide.description}`;\r\n    setAnnounceMessage(message);\r\n  }, [slides]);\r\n\r\n  const nextSlide = useCallback(() => {\r\n    setDirection('next');\r\n    setCurrentSlide((prev) => {\r\n      const newIndex = (prev + 1) % slides.length;\r\n      announceSlideChange(newIndex);\r\n      return newIndex;\r\n    });\r\n    setIsZoomed(false);\r\n    setProgress(0);\r\n  }, [slides.length, announceSlideChange]);\r\n\r\n  const prevSlide = useCallback(() => {\r\n    setDirection('prev');\r\n    setCurrentSlide((prev) => {\r\n      const newIndex = (prev - 1 + slides.length) % slides.length;\r\n      announceSlideChange(newIndex);\r\n      return newIndex;\r\n    });\r\n    setIsZoomed(false);\r\n    setProgress(0);\r\n  }, [slides.length, announceSlideChange]);\r\n\r\n  const goToSlide = (index) => {\r\n    setDirection(index > currentSlide ? 'next' : 'prev');\r\n    setCurrentSlide(index);\r\n    announceSlideChange(index);\r\n    setIsZoomed(false);\r\n    setProgress(0);\r\n  };\r\n\r\n  useEffect(() => {\r\n    let interval;\r\n    if (isAutoPlaying && !isZoomed) {\r\n      interval = setInterval(nextSlide, 5000);\r\n      \r\n      // Progress bar update\r\n      if (progressInterval.current) {\r\n        clearInterval(progressInterval.current);\r\n      }\r\n      progressInterval.current = setInterval(() => {\r\n        setProgress(prev => {\r\n          if (prev >= 100) return 0;\r\n          return prev + 2;\r\n        });\r\n      }, 100);\r\n    }\r\n    return () => {\r\n      clearInterval(interval);\r\n      if (progressInterval.current) {\r\n        clearInterval(progressInterval.current);\r\n      }\r\n    };\r\n  }, [isAutoPlaying, nextSlide, isZoomed]);\r\n\r\n  const handleMouseEnter = () => setIsAutoPlaying(false);\r\n  const handleMouseLeave = () => {\r\n    if (!isZoomed) {\r\n      setIsAutoPlaying(true);\r\n    }\r\n  };\r\n\r\n  const handleKeyDown = (e) => {\r\n    switch (e.key) {\r\n      case 'ArrowLeft':\r\n        prevSlide();\r\n        break;\r\n      case 'ArrowRight':\r\n        nextSlide();\r\n        break;\r\n      case 'ArrowUp':\r\n        if (isZoomed) {\r\n          setPanPosition(prev => ({\r\n            ...prev,\r\n            y: Math.max(prev.y - 10, -100)\r\n          }));\r\n        }\r\n        break;\r\n      case 'ArrowDown':\r\n        if (isZoomed) {\r\n          setPanPosition(prev => ({\r\n            ...prev,\r\n            y: Math.min(prev.y + 10, 100)\r\n          }));\r\n        }\r\n        break;\r\n      case 'Escape':\r\n        if (isZoomed) {\r\n          setIsZoomed(false);\r\n          setPanPosition({ x: 0, y: 0 });\r\n          setZoomLevel(1);\r\n        } else if (activeQuickView !== null) {\r\n          setActiveQuickView(null);\r\n        }\r\n        break;\r\n      case 'Tab':\r\n        // Handle focus trap in quick view modal\r\n        if (activeQuickView !== null) {\r\n          e.preventDefault();\r\n          handleTabKey(e.shiftKey);\r\n        }\r\n        break;\r\n      case ' ':\r\n      case 'Enter':\r\n        if (focusedElement === 'slider') {\r\n          setIsAutoPlaying(prev => !prev);\r\n          announceAutoplayState(!isAutoPlaying);\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n  const handleTabKey = (shiftKey) => {\r\n    const focusableElements = getFocusableElements();\r\n    const firstElement = focusableElements[0];\r\n    const lastElement = focusableElements[focusableElements.length - 1];\r\n    \r\n    if (shiftKey && document.activeElement === firstElement) {\r\n      lastElement.focus();\r\n    } else if (!shiftKey && document.activeElement === lastElement) {\r\n      firstElement.focus();\r\n    }\r\n  };\r\n\r\n  const getFocusableElements = () => {\r\n    const modal = document.querySelector(`.${styles.quickView}`);\r\n    if (!modal) return [];\r\n    \r\n    return Array.from(\r\n      modal.querySelectorAll(\r\n        'button, [href], input, select, textarea, [tabindex]:not([tabindex=\"-1\"])'\r\n      )\r\n    );\r\n  };\r\n\r\n  const announceAutoplayState = (isPlaying) => {\r\n    setAnnounceMessage(\r\n      isPlaying ? 'Slideshow autoplay started' : 'Slideshow autoplay paused'\r\n    );\r\n  };\r\n\r\n  // Focus management\r\n  useEffect(() => {\r\n    if (activeQuickView !== null) {\r\n      // Focus first focusable element in quick view\r\n      const focusableElements = getFocusableElements();\r\n      if (focusableElements.length > 0) {\r\n        focusableElements[0].focus();\r\n      }\r\n    } else {\r\n      // Return focus to slider\r\n      sliderRef.current?.focus();\r\n    }\r\n  }, [activeQuickView]);\r\n\r\n  // Screen reader announcements\r\n  useEffect(() => {\r\n    const timeoutId = setTimeout(() => {\r\n      setAnnounceMessage('');\r\n    }, 1000);\r\n\r\n    return () => clearTimeout(timeoutId);\r\n  }, [announceMessage]);\r\n\r\n  const handleZoomIn = () => {\r\n    setZoomLevel(prev => Math.min(prev + 0.5, 3));\r\n    setIsZoomed(true);\r\n    setIsAutoPlaying(false);\r\n  };\r\n\r\n  const handleZoomOut = () => {\r\n    setZoomLevel(prev => {\r\n      const newZoom = Math.max(prev - 0.5, 1);\r\n      if (newZoom === 1) {\r\n        setIsZoomed(false);\r\n        setPanPosition({ x: 0, y: 0 });\r\n      }\r\n      return newZoom;\r\n    });\r\n  };\r\n\r\n  const handleMouseDown = (e) => {\r\n    if (isZoomed) {\r\n      setIsDragging(true);\r\n      setDragStart({\r\n        x: e.clientX - panPosition.x,\r\n        y: e.clientY - panPosition.y\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleMouseMove = (e) => {\r\n    if (isDragging && isZoomed) {\r\n      const maxPanX = (imageRef.current?.offsetWidth * (zoomLevel - 1)) / 2;\r\n      const maxPanY = (imageRef.current?.offsetHeight * (zoomLevel - 1)) / 2;\r\n      \r\n      const newX = e.clientX - dragStart.x;\r\n      const newY = e.clientY - dragStart.y;\r\n\r\n      setPanPosition({\r\n        x: Math.max(Math.min(newX, maxPanX), -maxPanX),\r\n        y: Math.max(Math.min(newY, maxPanY), -maxPanY)\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleMouseUp = () => {\r\n    setIsDragging(false);\r\n  };\r\n\r\n  const handleWheel = (e) => {\r\n    if (e.ctrlKey) {\r\n      e.preventDefault();\r\n      const delta = -Math.sign(e.deltaY) * 0.1;\r\n      const newZoom = Math.max(1, Math.min(3, zoomLevel + delta));\r\n      setZoomLevel(newZoom);\r\n      if (newZoom > 1) {\r\n        setIsZoomed(true);\r\n        setIsAutoPlaying(false);\r\n      } else {\r\n        setIsZoomed(false);\r\n        setPanPosition({ x: 0, y: 0 });\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const handleKeyZoom = (e) => {\r\n      if (e.ctrlKey && e.key === '+') {\r\n        e.preventDefault();\r\n        handleZoomIn();\r\n      } else if (e.ctrlKey && e.key === '-') {\r\n        e.preventDefault();\r\n        handleZoomOut();\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyZoom);\r\n    return () => window.removeEventListener('keydown', handleKeyZoom);\r\n  }, []);\r\n\r\n  const handleTouchStart = (e) => {\r\n    setLastTouchTime(Date.now());\r\n    setLastTouchX(e.touches[0].clientX);\r\n    if (e.touches.length === 2) {\r\n      // Handle pinch zoom\r\n      const distance = Math.hypot(\r\n        e.touches[0].clientX - e.touches[1].clientX,\r\n        e.touches[0].clientY - e.touches[1].clientY\r\n      );\r\n      setPinchStart({ distance, zoom: zoomLevel });\r\n    } else {\r\n      setTouchStart(e.touches[0].clientX);\r\n      setTouchMoveCount(0);\r\n      \r\n      if (touchTimeout.current) {\r\n        clearTimeout(touchTimeout.current);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleTouchMove = (e) => {\r\n    const currentTime = Date.now();\r\n    const currentX = e.touches[0].clientX;\r\n    const timeDiff = currentTime - lastTouchTime;\r\n    const distance = currentX - lastTouchX;\r\n    \r\n    if (timeDiff > 0) {\r\n      setSwipeVelocity(distance / timeDiff);\r\n    }\r\n    \r\n    if (pinchStart && e.touches.length === 2) {\r\n      // Handle pinch zoom\r\n      e.preventDefault();\r\n      const distance = Math.hypot(\r\n        e.touches[0].clientX - e.touches[1].clientX,\r\n        e.touches[0].clientY - e.touches[1].clientY\r\n      );\r\n      \r\n      const scale = distance / pinchStart.distance;\r\n      const newZoom = Math.max(1, Math.min(3, pinchStart.zoom * scale));\r\n      \r\n      setZoomLevel(newZoom);\r\n      if (newZoom > 1) {\r\n        setIsZoomed(true);\r\n        setIsAutoPlaying(false);\r\n      }\r\n    } else if (e.touches.length === 1) {\r\n      setTouchEnd(e.touches[0].clientX);\r\n      setTouchMoveCount(prev => prev + 1);\r\n    }\r\n  };\r\n\r\n  const handleTouchEnd = useCallback((e) => {\r\n    const now = Date.now();\r\n    const velocity = swipeVelocity;\r\n    \r\n    setMomentum({\r\n      velocity,\r\n      timestamp: now\r\n    });\r\n\r\n    handleSlideTransition(velocity > 0 ? 'next' : 'prev');\r\n  }, [swipeVelocity, handleSlideTransition]);\r\n\r\n  useEffect(() => {\r\n    const slider = sliderRef.current;\r\n    if (slider) {\r\n      slider.focus();\r\n    }\r\n  }, []);\r\n\r\n  const getSlideClassName = (index) => {\r\n    if (index === currentSlide) return styles.active;\r\n    if (direction === 'next' && index === (currentSlide + 1) % slides.length) return styles.next;\r\n    if (direction === 'prev' && index === (currentSlide - 1 + slides.length) % slides.length) return styles.prev;\r\n    return '';\r\n  };\r\n\r\n  const handleQuickView = (productId) => {\r\n    setActiveQuickView(activeQuickView === productId ? null : productId);\r\n    setSelectedSize(null);\r\n    setSelectedColor(null);\r\n    setIs360View(false);\r\n    setRotationDegree(0);\r\n  };\r\n\r\n  const handle360Drag = (e) => {\r\n    if (is360View && rotationRef.current) {\r\n      const rect = rotationRef.current.getBoundingClientRect();\r\n      const x = e.clientX - rect.left;\r\n      const percentage = x / rect.width;\r\n      const newDegree = Math.floor(percentage * 360);\r\n      setRotationDegree(newDegree);\r\n    }\r\n  };\r\n\r\n  const toggleView = () => {\r\n    setIs360View(!is360View);\r\n    setRotationDegree(0);\r\n  };\r\n\r\n  const renderQuickView = (product) => {\r\n    if (!product) return null;\r\n\r\n    return (\r\n      <div className={styles.quickView} onClick={(e) => e.stopPropagation()}>\r\n        <div className={styles.quickViewContent}>\r\n          <button \r\n            className={styles.closeButton}\r\n            onClick={() => setActiveQuickView(null)}\r\n            aria-label=\"Close quick view\"\r\n          >\r\n            <ion-icon name=\"close-outline\"></ion-icon>\r\n          </button>\r\n\r\n          <div className={styles.productGallery}>\r\n            {is360View ? (\r\n              <div \r\n                ref={rotationRef}\r\n                className={styles.view360}\r\n                onMouseMove={handle360Drag}\r\n              >\r\n                <img \r\n                  src={product.images360[Math.floor(rotationDegree / (360 / product.images360.length))]}\r\n                  alt={`${product.name} - ${rotationDegree}Â° view`}\r\n                />\r\n                <button \r\n                  className={styles.viewToggle}\r\n                  onClick={toggleView}\r\n                  aria-label=\"Switch to standard view\"\r\n                >\r\n                  <ion-icon name=\"image-outline\"></ion-icon>\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <div className={styles.standardView}>\r\n                <img src={product.image} alt={product.name} />\r\n                <button \r\n                  className={styles.viewToggle}\r\n                  onClick={toggleView}\r\n                  aria-label=\"Switch to 360Â° view\"\r\n                >\r\n                  <ion-icon name=\"360-outline\"></ion-icon>\r\n                </button>\r\n              </div>\r\n            )}\r\n          </div>\r\n\r\n          <div className={styles.productInfo}>\r\n            <h3>{product.name}</h3>\r\n            <div className={styles.priceWrapper}>\r\n              <span className={styles.price}>${product.price}</span>\r\n              {product.originalPrice && (\r\n                <span className={styles.originalPrice}>${product.originalPrice}</span>\r\n              )}\r\n            </div>\r\n\r\n            <div className={styles.sizeSelector}>\r\n              <h4>Select Size</h4>\r\n              <div className={styles.sizeOptions}>\r\n                {product.sizes.map(size => (\r\n                  <button\r\n                    key={size}\r\n                    className={`${styles.sizeOption} ${selectedSize === size ? styles.selected : ''}`}\r\n                    onClick={() => setSelectedSize(size)}\r\n                  >\r\n                    {size}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div className={styles.colorSelector}>\r\n              <h4>Select Color</h4>\r\n              <div className={styles.colorOptions}>\r\n                {product.colors.map(color => (\r\n                  <button\r\n                    key={color.name}\r\n                    className={`${styles.colorOption} ${selectedColor === color.name ? styles.selected : ''}`}\r\n                    style={{ '--color': color.code }}\r\n                    onClick={() => setSelectedColor(color.name)}\r\n                    aria-label={`Select ${color.name} color`}\r\n                  >\r\n                    {selectedColor === color.name && (\r\n                      <ion-icon name=\"checkmark-outline\"></ion-icon>\r\n                    )}\r\n                  </button>\r\n                ))}\r\n              </div>\r\n            </div>\r\n\r\n            <div className={styles.features}>\r\n              {product.features.map((feature, index) => (\r\n                <div key={index} className={styles.feature}>\r\n                  <ion-icon name=\"checkmark-circle-outline\"></ion-icon>\r\n                  <span>{feature}</span>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            <button \r\n              className={styles.addToCart}\r\n              disabled={!selectedSize || !selectedColor}\r\n            >\r\n              Add to Cart\r\n              <ion-icon name=\"bag-add-outline\"></ion-icon>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderHotspots = (slide) => {\r\n    if (!slide.hotspots) return null;\r\n\r\n    return slide.hotspots.map(hotspot => (\r\n      <div\r\n        key={hotspot.id}\r\n        className={`${styles.hotspot} ${styles[hotspot.type]} ${activeHotspot === hotspot.id ? styles.active : ''}`}\r\n        style={{ left: `${hotspot.x}%`, top: `${hotspot.y}%` }}\r\n        onClick={(e) => {\r\n          e.stopPropagation();\r\n          if (hotspot.type === '360view') {\r\n            setIs360View(true);\r\n          } else {\r\n            setActiveHotspot(activeHotspot === hotspot.id ? null : hotspot.id);\r\n          }\r\n        }}\r\n        data-id={hotspot.id}\r\n      >\r\n        <div className={styles.hotspotIcon}>\r\n          <ion-icon name={hotspot.icon}></ion-icon>\r\n        </div>\r\n        <div className={styles.hotspotContent}>\r\n          <h3>{hotspot.title}</h3>\r\n          <p>{hotspot.description}</p>\r\n          {hotspot.price && (\r\n            <button \r\n              className={styles.quickViewButton}\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                handleQuickView(slide.id);\r\n              }}\r\n            >\r\n              Quick View\r\n              <ion-icon name=\"eye-outline\"></ion-icon>\r\n            </button>\r\n          )}\r\n        </div>\r\n        <div className={styles.hotspotRing}></div>\r\n      </div>\r\n    ));\r\n  };\r\n\r\n  // Preload images\r\n  useEffect(() => {\r\n    const preloadNextImage = (index) => {\r\n      const nextIndex = (index + 1) % slides.length;\r\n      const imageUrl = slides[nextIndex].image;\r\n      \r\n      if (!preloadedImages.has(imageUrl)) {\r\n        const img = new Image();\r\n        img.src = imageUrl;\r\n        img.onload = () => {\r\n          setPreloadedImages(prev => new Set([...prev, imageUrl]));\r\n        };\r\n      }\r\n    };\r\n\r\n    preloadNextImage(currentSlide);\r\n  }, [currentSlide, slides, preloadedImages]);\r\n\r\n  // Parallax effect\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      if (parallaxRef.current) {\r\n        const scrolled = window.pageYOffset;\r\n        parallaxRef.current.style.transform = `translateY(${scrolled * 0.5}px)`;\r\n      }\r\n    };\r\n\r\n    window.addEventListener('scroll', handleScroll);\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, []);\r\n\r\n  // Particle effect\r\n  useEffect(() => {\r\n    if (particlesRef.current) {\r\n      const canvas = particlesRef.current;\r\n      const ctx = canvas.getContext('2d');\r\n      const particles = [];\r\n\r\n      const createParticle = () => ({\r\n        x: Math.random() * canvas.width,\r\n        y: Math.random() * canvas.height,\r\n        size: Math.random() * 3 + 1,\r\n        speedX: Math.random() * 2 - 1,\r\n        speedY: Math.random() * 2 - 1,\r\n        opacity: Math.random() * 0.5 + 0.2\r\n      });\r\n\r\n      for (let i = 0; i < 50; i++) {\r\n        particles.push(createParticle());\r\n      }\r\n\r\n      const animate = () => {\r\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\r\n        \r\n        particles.forEach(particle => {\r\n          particle.x += particle.speedX;\r\n          particle.y += particle.speedY;\r\n\r\n          if (particle.x < 0 || particle.x > canvas.width) particle.speedX *= -1;\r\n          if (particle.y < 0 || particle.y > canvas.height) particle.speedY *= -1;\r\n\r\n          ctx.beginPath();\r\n          ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);\r\n          ctx.fillStyle = `rgba(255, 255, 255, ${particle.opacity})`;\r\n          ctx.fill();\r\n        });\r\n\r\n        requestAnimationFrame(animate);\r\n      };\r\n\r\n      animate();\r\n    }\r\n  }, []);\r\n\r\n  // Skip link for accessibility\r\n  const handleSkipToContent = () => {\r\n    const mainContent = document.querySelector('main');\r\n    if (mainContent) {\r\n      mainContent.focus();\r\n      mainContent.scrollIntoView();\r\n    }\r\n  };\r\n\r\n  // Enhanced error handling for images\r\n  const handleImageError = (imageUrl) => {\r\n    setImageLoadErrors(prev => new Set([...prev, imageUrl]));\r\n    const currentRetries = retryCount[imageUrl] || 0;\r\n    if (currentRetries < 3) {\r\n      setRetryCount(prev => ({\r\n        ...prev,\r\n        [imageUrl]: currentRetries + 1\r\n      }));\r\n      setTimeout(() => {\r\n        const img = new Image();\r\n        img.src = imageUrl;\r\n        img.onload = () => {\r\n          setImageLoadErrors(prev => {\r\n            const newErrors = new Set(prev);\r\n            newErrors.delete(imageUrl);\r\n            return newErrors;\r\n          });\r\n        };\r\n      }, 2000 * (currentRetries + 1));\r\n    }\r\n  };\r\n\r\n  // Enhanced touch handling\r\n  const handleDoubleTap = (e) => {\r\n    const now = Date.now();\r\n    const timeDiff = now - lastTapTime;\r\n    \r\n    if (timeDiff < 300) {\r\n      // Double tap detected\r\n      const touch = e.touches[0];\r\n      const element = document.elementFromPoint(touch.clientX, touch.clientY);\r\n      if (element.closest(`.${styles.imageWrapper}`)) {\r\n        if (isZoomed) {\r\n          setZoomLevel(1);\r\n          setIsZoomed(false);\r\n          setPanPosition({ x: 0, y: 0 });\r\n        } else {\r\n          setZoomLevel(2);\r\n          setIsZoomed(true);\r\n          const rect = element.getBoundingClientRect();\r\n          setPanPosition({\r\n            x: (touch.clientX - rect.left) / rect.width * 100,\r\n            y: (touch.clientY - rect.top) / rect.height * 100\r\n          });\r\n        }\r\n      }\r\n    }\r\n    setLastTapTime(now);\r\n  };\r\n\r\n  // Enhanced pinch zoom\r\n  const handlePinchZoom = (e) => {\r\n    if (e.touches.length === 2) {\r\n      const touch1 = e.touches[0];\r\n      const touch2 = e.touches[1];\r\n      const distance = Math.hypot(\r\n        touch2.clientX - touch1.clientX,\r\n        touch2.clientY - touch1.clientY\r\n      );\r\n      \r\n      if (touchDistance) {\r\n        const scale = distance / touchDistance;\r\n        const newZoom = Math.max(1, Math.min(3, zoomLevel * scale));\r\n        setZoomLevel(newZoom);\r\n        if (newZoom > 1) {\r\n          setIsZoomed(true);\r\n          const centerX = (touch1.clientX + touch2.clientX) / 2;\r\n          const centerY = (touch1.clientY + touch2.clientY) / 2;\r\n          const rect = e.currentTarget.getBoundingClientRect();\r\n          setPanPosition({\r\n            x: (centerX - rect.left) / rect.width * 100,\r\n            y: (centerY - rect.top) / rect.height * 100\r\n          });\r\n        }\r\n      }\r\n      setTouchDistance(distance);\r\n    }\r\n  };\r\n\r\n  // Spring physics for slide transitions\r\n  useEffect(() => {\r\n    if (springRef.current) {\r\n      springRef.current.style.transition = 'none';\r\n      const animation = springRef.current.animate([\r\n        { transform: 'translateX(0)' },\r\n        { transform: `translateX(${direction === 'next' ? '-100%' : '100%'})` }\r\n      ], {\r\n        duration: 800,\r\n        easing: 'cubic-bezier(0.4, 0, 0.2, 1)',\r\n        fill: 'forwards'\r\n      });\r\n      \r\n      animation.onfinish = () => {\r\n        springRef.current.style.transform = `translateX(${direction === 'next' ? '-100%' : '100%'})`;\r\n      };\r\n    }\r\n  }, [currentSlide, direction]);\r\n\r\n  // Enhanced keyboard shortcuts\r\n  useEffect(() => {\r\n    const handleKeyboardShortcuts = (e) => {\r\n      if (e.altKey) {\r\n        switch (e.key) {\r\n          case 'z':\r\n            handleZoomIn();\r\n            break;\r\n          case 'x':\r\n            handleZoomOut();\r\n            break;\r\n          case 'r':\r\n            setZoomLevel(1);\r\n            setIsZoomed(false);\r\n            setPanPosition({ x: 0, y: 0 });\r\n            break;\r\n          case 'p':\r\n            setIsAutoPlaying(prev => !prev);\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n    };\r\n\r\n    window.addEventListener('keydown', handleKeyboardShortcuts);\r\n    return () => window.removeEventListener('keydown', handleKeyboardShortcuts);\r\n  }, []);\r\n\r\n  // Enhanced error boundary\r\n  useEffect(() => {\r\n    const handleError = (error) => {\r\n      console.error('Hero component error:', error);\r\n      setError(error);\r\n    };\r\n\r\n    window.addEventListener('error', handleError);\r\n    return () => window.removeEventListener('error', handleError);\r\n  }, []);\r\n\r\n  // Move preloadVisibleImages before it's used\r\n  const preloadVisibleImages = useCallback(() => {\r\n    if (!isInView) return;\r\n\r\n    // Preload current and adjacent slides\r\n    const indicesToPreload = [\r\n      currentSlide,\r\n      (currentSlide + 1) % slides.length,\r\n      (currentSlide - 1 + slides.length) % slides.length\r\n    ];\r\n\r\n    indicesToPreload.forEach(index => {\r\n      const slide = slides[index];\r\n      if (slide && !preloadedImages.has(slide.image)) {\r\n        const img = new Image();\r\n        img.src = slide.image;\r\n        img.onload = () => {\r\n          setPreloadedImages(prev => new Set([...prev, slide.image]));\r\n        };\r\n        \r\n        // If slide has 360 view images, preload those too\r\n        if (slide.product?.images360) {\r\n          slide.product.images360.forEach(imageUrl => {\r\n            if (!preloadedImages.has(imageUrl)) {\r\n              const img360 = new Image();\r\n              img360.src = imageUrl;\r\n              img360.onload = () => {\r\n                setPreloadedImages(prev => new Set([...prev, imageUrl]));\r\n              };\r\n            }\r\n          });\r\n        }\r\n      }\r\n    });\r\n  }, [currentSlide, slides, isInView, preloadedImages]);\r\n\r\n  // Enhanced particle animation with performance optimization\r\n  const startParticleAnimation = useCallback(() => {\r\n    if (!particlesRef.current || !isInView) return;\r\n\r\n    const ctx = particlesRef.current.getContext('2d');\r\n    const particles = new Float32Array(150); // Use typed arrays for better performance\r\n    let lastTime = performance.now();\r\n\r\n    const animate = (currentTime) => {\r\n      const deltaTime = currentTime - lastTime;\r\n      lastTime = currentTime;\r\n\r\n      ctx.clearRect(0, 0, ctx.canvas.width, ctx.canvas.height);\r\n      \r\n      for (let i = 0; i < particles.length; i += 5) {\r\n        particles[i] += particles[i + 2] * deltaTime * 0.06;\r\n        particles[i + 1] += particles[i + 3] * deltaTime * 0.06;\r\n\r\n        if (particles[i] < 0 || particles[i] > ctx.canvas.width) particles[i + 2] *= -1;\r\n        if (particles[i + 1] < 0 || particles[i + 1] > ctx.canvas.height) particles[i + 3] *= -1;\r\n\r\n        ctx.globalAlpha = particles[i + 4];\r\n        ctx.beginPath();\r\n        ctx.arc(particles[i], particles[i + 1], 2, 0, Math.PI * 2);\r\n        ctx.fill();\r\n      }\r\n\r\n      animationFrameId.current = requestAnimationFrame(animate);\r\n    };\r\n\r\n    // Initialize particles\r\n    for (let i = 0; i < particles.length; i += 5) {\r\n      particles[i] = Math.random() * ctx.canvas.width;     // x\r\n      particles[i + 1] = Math.random() * ctx.canvas.height; // y\r\n      particles[i + 2] = Math.random() * 2 - 1;            // speedX\r\n      particles[i + 3] = Math.random() * 2 - 1;            // speedY\r\n      particles[i + 4] = Math.random() * 0.3 + 0.2;        // opacity\r\n    }\r\n\r\n    animate(performance.now());\r\n  }, [isInView]);\r\n\r\n  const stopParticleAnimation = useCallback(() => {\r\n    if (animationFrameId.current) {\r\n      cancelAnimationFrame(animationFrameId.current);\r\n    }\r\n  }, []);\r\n\r\n  // Now the Intersection Observer setup can use preloadVisibleImages\r\n  useEffect(() => {\r\n    intersectionObserver.current = new IntersectionObserver((entries) => {\r\n      entries.forEach(entry => {\r\n        setIsInView(entry.isIntersecting);\r\n        if (entry.isIntersecting) {\r\n          // Start animations and load resources\r\n          startParticleAnimation();\r\n          preloadVisibleImages();\r\n        } else {\r\n          // Cleanup when not in view\r\n          stopParticleAnimation();\r\n        }\r\n      });\r\n    }, INTERSECTION_OPTIONS);\r\n\r\n    if (sliderRef.current) {\r\n      intersectionObserver.current.observe(sliderRef.current);\r\n    }\r\n\r\n    return () => {\r\n      if (intersectionObserver.current) {\r\n        intersectionObserver.current.disconnect();\r\n      }\r\n    };\r\n  }, [startParticleAnimation, preloadVisibleImages, stopParticleAnimation]);\r\n\r\n  // Network status monitoring\r\n  useEffect(() => {\r\n    const handleOnline = () => setNetworkStatus(true);\r\n    const handleOffline = () => setNetworkStatus(false);\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  }, []);\r\n\r\n  // Enhanced keyboard navigation\r\n  const handleKeyboardNav = useCallback((e) => {\r\n    const actions = {\r\n      ArrowLeft: { fn: prevSlide, label: 'Previous slide', description: slides[(currentSlide - 1 + slides.length) % slides.length].title },\r\n      ArrowRight: { fn: nextSlide, label: 'Next slide', description: slides[(currentSlide + 1) % slides.length].title },\r\n      ArrowUp: { fn: handleZoomIn, label: 'Zoom in' },\r\n      ArrowDown: { fn: handleZoomOut, label: 'Zoom out' },\r\n      ' ': { fn: () => setIsAutoPlaying(prev => !prev), label: 'Toggle autoplay' },\r\n      Home: { fn: () => goToSlide(0), label: 'First slide' },\r\n      End: { fn: () => goToSlide(slides.length - 1), label: 'Last slide' }\r\n    };\r\n\r\n    const action = actions[e.key];\r\n    if (action && document.activeElement === sliderRef.current) {\r\n      e.preventDefault();\r\n      startTransition(() => {\r\n        action.fn();\r\n      });\r\n      announce(`${action.label}${action.description ? `: ${action.description}` : ''}`);\r\n    }\r\n  }, [slides, currentSlide, announce, prevSlide, nextSlide, handleZoomIn, handleZoomOut, goToSlide]);\r\n\r\n  // Sound effects (optional)\r\n  const playSound = useCallback((type) => {\r\n    if (!window.AudioContext) return;\r\n    \r\n    const audioContext = new AudioContext();\r\n    const oscillator = audioContext.createOscillator();\r\n    const gainNode = audioContext.createGain();\r\n\r\n    oscillator.connect(gainNode);\r\n    gainNode.connect(audioContext.destination);\r\n\r\n    const sounds = {\r\n      slide: { frequency: 440, duration: 0.15 },\r\n      zoom: { frequency: 660, duration: 0.1 },\r\n      error: { frequency: 220, duration: 0.3 }\r\n    };\r\n\r\n    const sound = sounds[type];\r\n    if (sound) {\r\n      oscillator.frequency.value = sound.frequency;\r\n      gainNode.gain.value = 0.1;\r\n      oscillator.start();\r\n      oscillator.stop(audioContext.currentTime + sound.duration);\r\n    }\r\n  }, []);\r\n\r\n  // Enhanced error handling\r\n  const handleError = useCallback((error, context) => {\r\n    console.error(`Error in ${context}:`, error);\r\n    setError(error);\r\n    playSound('error');\r\n    \r\n    // Attempt recovery based on context\r\n    switch (context) {\r\n      case 'image':\r\n        handleImageError(error.target.src);\r\n        break;\r\n      case 'animation':\r\n        stopParticleAnimation();\r\n        startParticleAnimation();\r\n        break;\r\n      default:\r\n        // Generic error recovery\r\n        setIsAutoPlaying(false);\r\n        setZoomLevel(ZOOM_LEVELS.MIN);\r\n        setPanPosition({ x: 0, y: 0 });\r\n    }\r\n  }, []);\r\n\r\n  // Add announceAction function\r\n  const announceAction = useCallback((message) => {\r\n    setAnnounceMessage(message);\r\n    // Clear the announcement after a delay\r\n    setTimeout(() => {\r\n      setAnnounceMessage('');\r\n    }, 1000);\r\n  }, []);\r\n\r\n  // Enhanced slide transition with momentum\r\n  const handleSlideTransition = useCallback((direction) => {\r\n    const velocity = momentum.velocity;\r\n    const now = Date.now();\r\n    const timeDelta = now - momentum.timestamp;\r\n    \r\n    if (Math.abs(velocity) > 0.5 && timeDelta < 300) {\r\n      // Use momentum to determine slide direction\r\n      const targetDirection = velocity > 0 ? 'next' : 'prev';\r\n      startTransition(() => {\r\n        if (targetDirection === 'next') {\r\n          nextSlide();\r\n        } else {\r\n          prevSlide();\r\n        }\r\n      });\r\n    } else {\r\n      // Normal slide transition\r\n      startTransition(() => {\r\n        if (direction === 'next') {\r\n          nextSlide();\r\n        } else {\r\n          prevSlide();\r\n        }\r\n      });\r\n    }\r\n  }, [momentum, nextSlide, prevSlide]);\r\n\r\n  // Add ResizeObserver for responsive handling\r\n  useEffect(() => {\r\n    resizeObserver.current = new ResizeObserver((entries) => {\r\n      for (const entry of entries) {\r\n        const { width } = entry.contentRect;\r\n        // Update layout based on new size\r\n        updateLayout(width);\r\n      }\r\n    });\r\n\r\n    if (sliderRef.current) {\r\n      resizeObserver.current.observe(sliderRef.current);\r\n    }\r\n\r\n    return () => {\r\n      if (resizeObserver.current) {\r\n        resizeObserver.current.disconnect();\r\n      }\r\n    };\r\n  }, []);\r\n\r\n  // Enhanced magnetic snap points\r\n  const updateSnapPoints = useCallback(() => {\r\n    if (!sliderRef.current) return;\r\n    \r\n    const sliderWidth = sliderRef.current.offsetWidth;\r\n    snapPoints.current.clear();\r\n    \r\n    slides.forEach((_, index) => {\r\n      snapPoints.current.set(index, index * sliderWidth);\r\n    });\r\n  }, [slides.length]);\r\n\r\n  useEffect(() => {\r\n    updateSnapPoints();\r\n    window.addEventListener('resize', updateSnapPoints);\r\n    return () => window.removeEventListener('resize', updateSnapPoints);\r\n  }, [updateSnapPoints]);\r\n\r\n  // Enhanced preview thumbnails\r\n  const renderPreviews = useCallback(() => {\r\n    return slides.map((slide, index) => (\r\n      <button\r\n        key={slide.id}\r\n        className={`${styles.preview} ${index === currentSlide ? styles.active : ''}`}\r\n        onClick={() => {\r\n          startTransition(() => {\r\n            goToSlide(index);\r\n          });\r\n        }}\r\n        onMouseEnter={() => {\r\n          // Preload image on hover\r\n          const img = new Image();\r\n          img.src = slide.image;\r\n        }}\r\n        aria-label={`Preview of ${slide.title}${index === currentSlide ? ' (Current)' : ''}`}\r\n        role=\"tab\"\r\n        aria-selected={index === currentSlide}\r\n        tabIndex={index === currentSlide ? 0 : -1}\r\n      >\r\n        <div className={styles.previewProgress} role=\"presentation\">\r\n          <div \r\n            className={styles.previewProgressFill} \r\n            style={{ \r\n              width: index === currentSlide ? `${progress}%` : '0%' \r\n            }} \r\n          />\r\n        </div>\r\n        <img \r\n          src={slide.image} \r\n          alt=\"\" \r\n          className={styles.previewImage}\r\n          loading=\"lazy\"\r\n          role=\"presentation\"\r\n        />\r\n        <div className={styles.previewOverlay} role=\"presentation\" />\r\n      </button>\r\n    ));\r\n  }, [slides, currentSlide, progress, goToSlide]);\r\n\r\n  // Enhanced accessibility announcements\r\n  const announce = useCallback((message, priority = 'polite') => {\r\n    const announcer = document.createElement('div');\r\n    announcer.setAttribute('aria-live', priority);\r\n    announcer.setAttribute('aria-atomic', 'true');\r\n    announcer.setAttribute('class', styles.visuallyHidden);\r\n    document.body.appendChild(announcer);\r\n\r\n    // Use two updates to ensure reliable announcement\r\n    setTimeout(() => {\r\n      announcer.textContent = message;\r\n    }, 50);\r\n\r\n    setTimeout(() => {\r\n      document.body.removeChild(announcer);\r\n    }, 1000);\r\n  }, []);\r\n\r\n  // Add updateLayout function before the ResizeObserver effect\r\n  const updateLayout = useCallback((width) => {\r\n    if (!sliderRef.current) return;\r\n\r\n    // Update layout based on viewport width\r\n    const isMobile = width < 768;\r\n    const isTablet = width >= 768 && width < 1200;\r\n    \r\n    // Update slide dimensions\r\n    const slides = sliderRef.current.querySelectorAll(`.${styles.slide}`);\r\n    slides.forEach(slide => {\r\n      const content = slide.querySelector(`.${styles.content}`);\r\n      const imageWrapper = slide.querySelector(`.${styles.imageWrapper}`);\r\n      \r\n      if (isMobile) {\r\n        content.style.maxWidth = '100%';\r\n        imageWrapper.style.width = '100%';\r\n      } else if (isTablet) {\r\n        content.style.maxWidth = '50%';\r\n        imageWrapper.style.width = '55%';\r\n      } else {\r\n        content.style.maxWidth = '600px';\r\n        imageWrapper.style.width = '65%';\r\n      }\r\n    });\r\n\r\n    // Update hotspot positions\r\n    const hotspots = sliderRef.current.querySelectorAll(`.${styles.hotspot}`);\r\n    hotspots.forEach(hotspot => {\r\n      const x = parseFloat(hotspot.style.left);\r\n      const y = parseFloat(hotspot.style.top);\r\n      \r\n      if (isMobile) {\r\n        hotspot.style.transform = `translate(-50%, -50%) scale(0.8)`;\r\n      } else {\r\n        hotspot.style.transform = `translate(-50%, -50%)`;\r\n      }\r\n    });\r\n\r\n    // Update preview container\r\n    const previewContainer = sliderRef.current.querySelector(`.${styles.previewContainer}`);\r\n    if (previewContainer) {\r\n      if (isMobile) {\r\n        previewContainer.style.bottom = '5rem';\r\n        previewContainer.style.right = '50%';\r\n        previewContainer.style.transform = 'translateX(50%) translateZ(100px)';\r\n      } else {\r\n        previewContainer.style.bottom = '6rem';\r\n        previewContainer.style.right = '4rem';\r\n        previewContainer.style.transform = 'translateZ(100px)';\r\n      }\r\n    }\r\n\r\n    // Update controls position\r\n    const controls = sliderRef.current.querySelector(`.${styles.controls}`);\r\n    if (controls) {\r\n      if (isMobile) {\r\n        controls.style.left = '2rem';\r\n        controls.style.bottom = '1.5rem';\r\n      } else {\r\n        controls.style.left = '4rem';\r\n        controls.style.bottom = '2.5rem';\r\n      }\r\n    }\r\n\r\n    // Update snap points after layout changes\r\n    updateSnapPoints();\r\n  }, [updateSnapPoints]);\r\n\r\n  return (\r\n    <ErrorBoundary onError={handleError}>\r\n      <button \r\n        onClick={handleSkipToContent}\r\n        className={styles.skipLink}\r\n      >\r\n        Skip to main content\r\n      </button>\r\n\r\n      <div \r\n        role=\"status\" \r\n        aria-live=\"polite\" \r\n        className={styles.visuallyHidden}\r\n      >\r\n        {announceMessage}\r\n      </div>\r\n\r\n      <section \r\n        ref={sliderRef}\r\n        className={`${styles.hero} ${isPending ? styles.pending : ''}`}\r\n        style={{ \r\n          contain: 'content',\r\n          cursor: isDragging ? 'grabbing' : isZoomed ? 'grab' : 'default' \r\n        }}\r\n        onMouseEnter={handleMouseEnter}\r\n        onMouseLeave={handleMouseLeave}\r\n        onKeyDown={handleKeyDown}\r\n        onTouchStart={handleTouchStart}\r\n        onTouchMove={handleTouchMove}\r\n        onTouchEnd={handleTouchEnd}\r\n        onMouseDown={handleMouseDown}\r\n        onMouseMove={handleMouseMove}\r\n        onMouseUp={handleMouseUp}\r\n        onWheel={handleWheel}\r\n        tabIndex=\"0\"\r\n        role=\"region\"\r\n        aria-label={`Hero Slider with ${slides.length} slides. Use arrow keys to navigate. Press Space or Enter to toggle autoplay.`}\r\n        aria-roledescription=\"carousel\"\r\n      >\r\n        <canvas \r\n          ref={particlesRef}\r\n          className={styles.particles}\r\n          aria-hidden=\"true\"\r\n        />\r\n\r\n        <div \r\n          ref={parallaxRef}\r\n          className={styles.parallaxWrapper}\r\n        >\r\n          <div className={styles.slider}>\r\n            {slides.map((slide, index) => (\r\n              <div\r\n                key={slide.id}\r\n                ref={el => slideRefs.current[index] = el}\r\n                className={`${styles.slide} ${getSlideClassName(index)}`}\r\n                style={{\r\n                  '--slide-color': slide.color\r\n                }}\r\n                role=\"group\"\r\n                aria-roledescription=\"slide\"\r\n                aria-label={`${index + 1} of ${slides.length}: ${slide.title}`}\r\n                aria-hidden={index !== currentSlide}\r\n              >\r\n                <div className={styles.content}>\r\n                  <span className={styles.subtitle} role=\"text\">{slide.subtitle}</span>\r\n                  <h1 className={styles.title}>{slide.title}</h1>\r\n                  <p className={styles.description}>{slide.description}</p>\r\n                  <Link \r\n                    to=\"/shop\" \r\n                    className={styles.cta}\r\n                    aria-label={`${slide.cta} - ${slide.title}`}\r\n                  >\r\n                    {slide.cta}\r\n                    <ion-icon name=\"arrow-forward-outline\" aria-hidden=\"true\"></ion-icon>\r\n                  </Link>\r\n                </div>\r\n                \r\n                <div className={styles.imageWrapper}>\r\n                  <picture>\r\n                    <source\r\n                      media=\"(min-width: 1200px)\"\r\n                      srcSet={`${slide.image}?width=1600&quality=80 1x, ${slide.image}?width=3200&quality=80 2x`}\r\n                    />\r\n                    <source\r\n                      media=\"(min-width: 768px)\"\r\n                      srcSet={`${slide.image}?width=1200&quality=80 1x, ${slide.image}?width=2400&quality=80 2x`}\r\n                    />\r\n                    <img\r\n                      src={`${slide.image}?width=800&quality=80`}\r\n                      alt={slide.title}\r\n                      loading={index === currentSlide ? \"eager\" : \"lazy\"}\r\n                      onError={() => handleImageError(slide.image)}\r\n                      className={styles.slideImage}\r\n                      style={{\r\n                        opacity: imageLoadErrors.has(slide.image) ? 0.5 : 1\r\n                      }}\r\n                    />\r\n                  </picture>\r\n                  {imageLoadErrors.has(slide.image) && (\r\n                    <div className={styles.imageError}>\r\n                      <ion-icon name=\"warning-outline\"></ion-icon>\r\n                      <p>Image failed to load</p>\r\n                      <button \r\n                        onClick={() => {\r\n                          setImageLoadErrors(prev => {\r\n                            const newErrors = new Set(prev);\r\n                            newErrors.delete(slide.image);\r\n                            return newErrors;\r\n                          });\r\n                          setRetryCount(prev => ({...prev, [slide.image]: 0}));\r\n                        }}\r\n                      >\r\n                        Retry\r\n                      </button>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {activeQuickView === slide.id && slide.product && (\r\n                  <Suspense fallback={<div className={styles.loading}>Loading...</div>}>\r\n                    <QuickView \r\n                      product={slide.product}\r\n                      onClose={() => setActiveQuickView(null)}\r\n                    />\r\n                  </Suspense>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </div>\r\n        </div>\r\n\r\n        <div \r\n          className={styles.controls} \r\n          role=\"group\" \r\n          aria-label=\"Slider controls\"\r\n        >\r\n          <button \r\n            className={`${styles.arrow} ${styles.prev}`}\r\n            onClick={prevSlide}\r\n            aria-label=\"Previous slide\"\r\n            aria-controls=\"hero-slider\"\r\n          >\r\n            <ion-icon name=\"chevron-back-outline\" aria-hidden=\"true\"></ion-icon>\r\n          </button>\r\n          <div \r\n            className={styles.indicators} \r\n            role=\"group\" \r\n            aria-label=\"Slide indicators\"\r\n          >\r\n            {slides.map((_, index) => (\r\n              <button\r\n                key={index}\r\n                className={`${styles.indicator} ${index === currentSlide ? styles.active : ''}`}\r\n                onClick={() => goToSlide(index)}\r\n                aria-label={`Go to slide ${index + 1}`}\r\n                aria-current={index === currentSlide}\r\n                aria-controls=\"hero-slider\"\r\n              />\r\n            ))}\r\n          </div>\r\n          <button \r\n            className={`${styles.arrow} ${styles.next}`}\r\n            onClick={nextSlide}\r\n            aria-label=\"Next slide\"\r\n            aria-controls=\"hero-slider\"\r\n          >\r\n            <ion-icon name=\"chevron-forward-outline\" aria-hidden=\"true\"></ion-icon>\r\n          </button>\r\n        </div>\r\n\r\n        <div className={styles.zoomControl}>\r\n          <button\r\n            className={styles.zoomButton}\r\n            onClick={handleZoomIn}\r\n            disabled={zoomLevel >= 3}\r\n            aria-label=\"Zoom in\"\r\n          >\r\n            <ion-icon name=\"add-outline\"></ion-icon>\r\n          </button>\r\n          <button\r\n            className={styles.zoomButton}\r\n            onClick={handleZoomOut}\r\n            disabled={zoomLevel <= 1}\r\n            aria-label=\"Zoom out\"\r\n          >\r\n            <ion-icon name=\"remove-outline\"></ion-icon>\r\n          </button>\r\n          {isZoomed && (\r\n            <button\r\n              className={styles.zoomButton}\r\n              onClick={() => {\r\n                setZoomLevel(1);\r\n                setIsZoomed(false);\r\n                setPanPosition({ x: 0, y: 0 });\r\n              }}\r\n              aria-label=\"Reset zoom\"\r\n            >\r\n              <ion-icon name=\"refresh-outline\"></ion-icon>\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        <div className={styles.previewContainer}>\r\n          {renderPreviews()}\r\n        </div>\r\n\r\n        <div className={styles.progressBar}>\r\n          <div \r\n            className={styles.progressFill} \r\n            style={{ width: `${progress}%` }}\r\n          />\r\n        </div>\r\n\r\n        {isPending && (\r\n          <div className={styles.loadingIndicator} role=\"status\">\r\n            <div className={styles.loadingSpinner} role=\"presentation\" />\r\n            <span className={styles.visuallyHidden}>Loading next slide...</span>\r\n          </div>\r\n        )}\r\n      </section>\r\n      {!networkStatus && (\r\n        <div className={styles.networkError}>\r\n          You're offline. Some features may be limited.\r\n        </div>\r\n      )}\r\n    </ErrorBoundary>\r\n  );\r\n};\r\n\r\nexport default Hero; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}